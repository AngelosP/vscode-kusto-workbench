<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Kusto Query Editor</title>
	<link rel="stylesheet" href="{{monacoCssUri}}">
	<link rel="stylesheet" href="{{toastUiEditorCssUri}}">
	<link rel="stylesheet" href="{{toastUiEditorDarkCssUri}}">
	<link rel="stylesheet" href="{{tuiColorPickerCssUri}}">
	<link rel="stylesheet" href="{{toastUiEditorColorSyntaxCssUri}}">
	<link rel="stylesheet" href="{{queryEditorCssUri}}">
</head>

<body>
	<div id="queries-container"></div>
	<div class="add-controls" role="group" aria-label="Add sections">
		<span class="add-control-wrapper"><button class="add-control-btn" data-add-kind="query" onclick="__kustoRequestAddSection('query')">Add Query</button></span>
		<span class="add-control-wrapper"><button class="add-control-btn" data-add-kind="chart" onclick="__kustoRequestAddSection('chart')">Add Chart</button></span>
		<span class="add-control-wrapper"><button class="add-control-btn" data-add-kind="markdown" onclick="__kustoRequestAddSection('markdown')">Add Markdown</button></span>
		<span class="add-control-wrapper"><button class="add-control-btn" data-add-kind="python" onclick="__kustoRequestAddSection('python')">Add Python</button></span>
		<span class="add-control-wrapper"><button class="add-control-btn" data-add-kind="url" onclick="__kustoRequestAddSection('url')">Add URL</button></span>
	</div>
	<div class="repo-issues-link" role="note" aria-label="Feedback">
		<a class="repo-issues-anchor" href="https://github.com/AngelosP/vscode-kusto-workbench/issues" target="_blank" rel="noopener noreferrer">Ask for a fix or feature</a>
	</div>

	<!-- Object Viewer Modal -->
	<div id="objectViewer" class="object-viewer-modal" onclick="closeObjectViewer(event)">
		<div class="object-viewer-content" onclick="event.stopPropagation()">
			<div class="object-viewer-header">
				<h3 id="objectViewerTitle"></h3>
				<div class="object-viewer-search">
					<div id="objectViewerSearchHost"></div>
					<span class="object-viewer-search-results" id="objectViewerSearchResults"></span>
				</div>
				<button class="unified-btn-secondary unified-btn-icon-only refresh-btn close-btn object-viewer-close" type="button" onclick="closeObjectViewer()" title="Close" aria-label="Close">
					<svg viewBox="0 0 16 16" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg">
						<path d="M4 4l8 8" />
						<path d="M12 4L4 12" />
					</svg>
				</button>
			</div>
			<div class="object-viewer-body">
				<div class="object-viewer-section object-viewer-props-section">
					<div class="object-viewer-section-header">
						<button id="objectViewerBackBtn" class="unified-btn-secondary tool-toggle-btn object-viewer-back-btn" type="button" onclick="objectViewerNavigateBack()" title="Back" aria-label="Back" style="display:none;">←</button>
						<div class="object-viewer-section-title" id="objectViewerPropsTitle"></div>
					</div>
					<table class="object-viewer-props-table" id="objectViewerPropsTable" aria-label="Properties"></table>
				</div>

				<div class="object-viewer-section object-viewer-raw-section">
					<div class="object-viewer-section-header">
						<div class="object-viewer-section-title">Raw value</div>
						<div class="object-viewer-raw-actions">
							<button id="objectViewerRawCopy" class="unified-btn-secondary tool-toggle-btn object-viewer-raw-copy" type="button" onclick="copyObjectViewerRawToClipboard()" title="Copy to clipboard" aria-label="Copy to clipboard"></button>
							<button id="objectViewerRawToggle" class="unified-btn-secondary tool-toggle-btn object-viewer-raw-toggle" type="button" onclick="toggleObjectViewerRaw()" title="Hide raw value" aria-label="Hide raw value"></button>
						</div>
					</div>
					<div id="objectViewerRawBody" class="object-viewer-raw-body">
						<div id="objectViewerContent" class="object-viewer-json object-viewer-json-wrap"></div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Column Analysis Modal -->
	<div id="columnAnalysisModal" class="column-analysis-modal" onclick="closeColumnAnalysis(event)">
		<div class="column-analysis-content" onclick="event.stopPropagation()">
			<div class="column-analysis-header">
				<h3 id="columnAnalysisTitle">Column Analysis</h3>
				<button class="unified-btn-secondary unified-btn-icon-only refresh-btn close-btn column-analysis-close" type="button" onclick="closeColumnAnalysis()" title="Close" aria-label="Close">
					<svg viewBox="0 0 16 16" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg">
						<path d="M4 4l8 8" />
						<path d="M12 4L4 12" />
					</svg>
				</button>
			</div>
			<div class="column-analysis-body" id="columnAnalysisBody"></div>
		</div>
	</div>

	<!-- Cell Viewer Modal -->
	<div id="cellViewer" class="cell-viewer-modal" onclick="closeCellViewer(event)">
		<div class="cell-viewer-content" onclick="event.stopPropagation()">
			<div class="cell-viewer-header">
				<h3 id="cellViewerTitle"></h3>
				<div class="cell-viewer-search">
					<div id="cellViewerSearchHost"></div>
					<span class="cell-viewer-search-results" id="cellViewerSearchResults"></span>
				</div>
				<div class="cell-viewer-actions">
					<button id="cellViewerPrev" class="unified-btn-secondary tool-toggle-btn cell-viewer-nav" type="button" onclick="cellViewerPreviousMatch()" title="Previous match (Shift+Enter)" aria-label="Previous match">↑</button>
					<button id="cellViewerNext" class="unified-btn-secondary tool-toggle-btn cell-viewer-nav" type="button" onclick="cellViewerNextMatch()" title="Next match (Enter)" aria-label="Next match">↓</button>
					<button id="cellViewerCopy" class="unified-btn-secondary tool-toggle-btn cell-viewer-copy" type="button" onclick="copyCellViewerToClipboard()" title="Copy to clipboard" aria-label="Copy to clipboard"></button>
				</div>
				<button class="unified-btn-secondary unified-btn-icon-only refresh-btn close-btn cell-viewer-close" type="button" onclick="closeCellViewer()" title="Close" aria-label="Close">
					<svg viewBox="0 0 16 16" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg">
						<path d="M4 4l8 8" />
						<path d="M12 4L4 12" />
					</svg>
				</button>
			</div>
			<div class="cell-viewer-body">
				<div id="cellViewerContent" class="cell-viewer-value"></div>
			</div>
		</div>
	</div>

	<!-- Diff View Modal -->
	<div id="diffViewModal" class="diff-view-modal">
		<div class="diff-view-content" onclick="event.stopPropagation()">
			<div class="diff-view-header">
				<h3 id="diffViewTitle">Diff</h3>
				<button id="diffViewCloseBtn" class="unified-btn-secondary unified-btn-icon-only refresh-btn close-btn diff-view-close" type="button" onclick="closeDiffView()" title="Close" aria-label="Close">
					<svg viewBox="0 0 16 16" width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg">
						<path d="M4 4l8 8" />
						<path d="M12 4L4 12" />
					</svg>
				</button>
			</div>
			<div class="diff-view-body" id="diffViewBody"></div>
		</div>
	</div>

	<script src="{{monacoLoaderUri}}"></script>
	<script>
		window.__kustoQueryEditorConfig = {
			monacoVsUri: "{{monacoVsUri}}",
			monacoLoaderUri: "{{monacoLoaderUri}}",
			monacoWorkers: {{monacoWorkersJson}},
			cacheBuster: "{{cacheBuster}}",
			copilotLogoUri: "{{copilotLogoUri}}"
		};
	</script>
	<script src="{{queryEditorJsUri}}"></script>
</body>

</html>