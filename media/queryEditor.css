
		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		.comparison-diff-link {
			color: inherit;
			text-decoration: underline;
			cursor: pointer;
		}

		.comparison-diff-link:hover,
		.comparison-diff-link:focus {
			opacity: 0.95;
		}
		html {
			scrollbar-gutter: stable;
		}
		
		body {
			font-family: var(--vscode-font-family);
			color: var(--vscode-foreground);
			padding: 16px;
		}

		/* Plain .md files: maximize usable width and simplify section chrome. */
		body[data-kusto-document-kind="md"] {
			padding: 0;
			height: 100vh;
			overflow: hidden;
			display: flex;
			flex-direction: column;
		}

		/* Plain .md files: the page itself should not scroll.
		   Keep header controls + toolbar visible and scroll the editor surface instead. */
		body[data-kusto-document-kind="md"] #queries-container {
			flex: 1 1 auto;
			min-height: 0;
			display: flex;
			flex-direction: column;
		}
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] {
			display: flex;
			flex-direction: column;
			height: 100%;
		}
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .query-header {
			flex: 0 0 auto;
		}
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .query-editor-wrapper {
			flex: 1 1 auto;
			min-height: 0;
			height: auto;
			overflow: hidden;
		}
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor {
			flex: 1 1 auto;
			min-height: 0;
		}
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .markdown-viewer {
			flex: 1 1 auto;
			min-height: 0;
			overflow: auto;
		}

		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] {
			border: none;
			box-shadow: none;
			background: transparent;
			padding: 0;
			margin: 0;
		}

		/* Hide controls that aren't useful in single-section .md files. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .close-btn,
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] button[id$="_toggle"] {
			display: none !important;
		}

		/* Hide the Markdown name input (not functional for .md mode). */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .query-name {
			display: none !important;
		}

		/* Remove the now-empty left header group so controls can align left. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .query-name-group {
			display: none !important;
		}

		/* In .md mode, tighten header spacing since the name input is hidden. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .query-header {
			margin-bottom: 0;
		}
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .query-editor-wrapper {
			margin: 0;
		}

		/* Hide the reorder grip/handle for single-section .md files. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .section-drag-handle {
			display: none !important;
		}

		/* Hide maximize button + resize grip in .md mode (always auto-expands). */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .md-tab.md-max-btn,
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .query-editor-resizer {
			display: none !important;
		}

		/* Mode buttons: add a little top margin in .md mode. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .md-tab.md-mode-btn {
			margin-top: 10px;
			margin-bottom: 10px;
		}

		/* Remove the leftover divider line next to the mode buttons in .md mode. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .md-tabs-divider {
			display: none !important;
		}

		/* Align the mode buttons to the left and match the toolbar left margin. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .md-tabs {
			margin-left: 10px;
		}
		/* Undo any prior per-button alignment tweaks now that the group is left-aligned. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] button[id$="_md_mode_wysiwyg"] {
			margin-right: 0 !important;
		}

		/* Remove any remaining border/chrome around the editor surface in .md mode. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .query-editor-wrapper {
			border: none;
			background: transparent;
		}

		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-defaultUI,
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-main,
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-contents,
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-md-container,
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-ww-container {
			border: none !important;
			outline: none !important;
			box-shadow: none !important;
			background: transparent;
		}

		/* Toast UI toolbar: keep a border just around the toolbar in .md mode. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-defaultUI-toolbar {
			border: 1px solid var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.25)))) !important;
			box-shadow: none !important;
			margin-left: 10px;
			margin-right: 10px;
			margin-bottom: 0 !important;
		}

		/* Square corners on the parent UI wrapper in .md mode. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-defaultUI {
			border-radius: 0 !important;
		}

		/* Remove the extra vertical gap between the toolbar and the editor surface in .md mode. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-main,
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-md-container,
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .kusto-markdown-editor .toastui-editor-ww-container {
			margin-top: 0 !important;
			padding-top: 0 !important;
		}

		/* Preview viewer: remove border for full-width docs feel in .md mode. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"] .markdown-viewer {
			border: none;
			background: transparent;
		}

		/* .md Preview mode: add extra left/right gutter around the viewer. */
		body[data-kusto-document-kind="md"] .query-box[id^="markdown_"].is-md-preview .markdown-viewer {
			margin-left: 10px;
			/* Nudge the scroll container ~15px wider so the vertical scrollbar sits further right. */
			margin-right: -5px;
			margin-top: -30px;
		}

		.add-controls {
			width: 100%;
			display: flex;
			gap: 8px;
			flex-wrap: wrap;
			justify-content: center;
			align-items: center;
			margin: 8px 0 16px;
		}

		.repo-issues-link {
			width: 100%;
			display: flex;
			justify-content: center;
			margin: 0 0 100px;
		}

		.repo-issues-anchor {
			color: inherit;
			font-size: 12px;
			text-decoration: underline;
		}

		.repo-issues-anchor:hover,
		.repo-issues-anchor:focus {
			color: inherit;
		}

		/* In plain .md mode the page itself doesn't scroll; keep the link visible
		   without stealing height from the editor, and add the extra bottom space
		   to the actual scroll surfaces instead. */
		body[data-kusto-document-kind="md"] .repo-issues-link {
			margin-bottom: 0;
		}

		.add-control-btn {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			color: var(--vscode-foreground);
			border: 1px solid var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.25))));
			border-radius: 4px;
			padding: 6px 10px;
			cursor: pointer;
			font-size: 12px;
			white-space: nowrap;
		}

		.add-control-btn:hover {
			background: var(--vscode-list-hoverBackground);
			border-color: var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.35))));
		}

		/* ==========================================================================
		   UNIFIED BUTTON SYSTEM
		   ==========================================================================
		   
		   This section defines reusable button styles for consistent UI across the app.
		   
		   Categories:
		   - .unified-btn-primary    : Prominent action buttons (colored background)
		   - .unified-btn-secondary  : Subtle buttons (transparent/minimal background)
		   - .kusto-dropdown-btn     : Dropdown buttons (defined elsewhere, see dropdown section)
		   - .unified-btn-split      : Split buttons (primary action + dropdown toggle)
		   
		   Toggle State:
		   - Use .is-active class for toggled/selected state on any button type
		   
		   Modifiers:
		   - .unified-btn-icon-only  : Square icon-only button (28x28px)
		   - .unified-btn-bordered   : Adds visible border to secondary buttons
		   ========================================================================== */

		/* --- PRIMARY BUTTON ---
		   Use for main actions like "Run Query", "Send", "Apply".
		   Reference: Run Query button styling. */
		.unified-btn-primary {
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			border: none;
			border-radius: 2px;
			padding: 6px 14px;
			font-size: 13px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 6px;
			white-space: nowrap;
			line-height: 1.4;
		}

		.unified-btn-primary:hover:not(:disabled) {
			background: var(--vscode-button-hoverBackground);
		}

		.unified-btn-primary:active:not(:disabled) {
			opacity: 0.85;
		}

		.unified-btn-primary:focus {
			outline: 1px solid var(--vscode-focusBorder);
			outline-offset: 1px;
		}

		.unified-btn-primary:focus:not(:focus-visible) {
			outline: none;
		}

		.unified-btn-primary:disabled {
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			cursor: not-allowed;
			opacity: 0.5;
		}

		/* Primary button toggle state */
		.unified-btn-primary.is-active {
			background: var(--vscode-button-hoverBackground);
		}

		/* --- SECONDARY BUTTON ---
		   Use for less prominent actions, icon buttons, toggles.
		   Reference: Show/Hide toggle button, Refresh button. */
		.unified-btn-secondary {
			background: transparent;
			color: var(--vscode-foreground);
			border: 1px solid transparent;
			border-radius: 4px;
			padding: 4px 8px;
			font-size: 12px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 4px;
			white-space: nowrap;
			line-height: 1.4;
		}

		.unified-btn-secondary:hover:not(:disabled) {
			background: var(--vscode-list-hoverBackground);
		}

		.unified-btn-secondary:active:not(:disabled) {
			opacity: 0.75;
		}

		.unified-btn-secondary:focus {
			outline: 1px solid var(--vscode-focusBorder);
			outline-offset: -1px;
		}

		.unified-btn-secondary:focus:not(:focus-visible) {
			outline: none;
		}

		.unified-btn-secondary:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		/* Secondary button toggle state - use toolbar active background for consistency */
		.unified-btn-secondary.is-active {
			background: var(--vscode-toolbar-activeBackground, var(--vscode-actionBar-toggledBackground, rgba(128, 128, 128, 0.25)));
			color: var(--vscode-foreground);
			border-color: transparent;
		}

		/* Secondary button with visible border (like refresh buttons) */
		.unified-btn-secondary.unified-btn-bordered {
			border-color: var(--vscode-input-border);
		}

		/* Icon-only button modifier (square 28x28px) */
		.unified-btn-icon-only {
			width: 28px;
			height: 28px;
			min-width: 28px;
			padding: 0;
		}

		.unified-btn-icon-only svg {
			display: block;
		}

		/* --- SPLIT BUTTON ---
		   Use for actions with multiple modes/options.
		   Reference: Run Query (take 100) / Run Query / Run Query (sample 100). */
		.unified-btn-split {
			position: relative;
			display: inline-flex;
			align-items: stretch;
		}

		.unified-btn-split-main {
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			border: none;
			border-radius: 2px 0 0 2px;
			padding: 6px 14px;
			font-size: 13px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 6px;
			white-space: nowrap;
			line-height: 1.4;
		}

		.unified-btn-split-main:hover:not(:disabled) {
			background: var(--vscode-button-hoverBackground);
		}

		.unified-btn-split-main:active:not(:disabled) {
			opacity: 0.85;
		}

		.unified-btn-split-main:focus {
			outline: 1px solid var(--vscode-focusBorder);
			outline-offset: 1px;
		}

		.unified-btn-split-main:focus:not(:focus-visible) {
			outline: none;
		}

		.unified-btn-split-main:disabled {
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			cursor: not-allowed;
			opacity: 0.5;
		}

		.unified-btn-split-toggle {
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			border: none;
			border-left: 1px solid var(--vscode-button-border, rgba(255,255,255,0.2));
			border-radius: 0 2px 2px 0;
			padding: 6px 5px;
			min-width: 18px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			justify-content: center;
		}

		.unified-btn-split-toggle:hover:not(:disabled) {
			background: var(--vscode-button-hoverBackground);
		}

		.unified-btn-split-toggle:active:not(:disabled) {
			opacity: 0.85;
		}

		.unified-btn-split-toggle:focus {
			outline: 1px solid var(--vscode-focusBorder);
			outline-offset: 1px;
		}

		.unified-btn-split-toggle:focus:not(:focus-visible) {
			outline: none;
		}

		.unified-btn-split-toggle:disabled {
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			cursor: not-allowed;
			opacity: 0.5;
		}

		/* Run button label - hide when narrow */
		.unified-btn-split-main .run-btn-label {
			margin-left: 4px;
		}

		.unified-btn-split-main.is-compact .run-btn-label {
			display: none;
		}

		/* Split button menu */
		.unified-btn-split-menu {
			position: absolute;
			top: calc(100% + 4px);
			left: 0;
			min-width: 220px;
			background: var(--vscode-dropdown-background);
			color: var(--vscode-dropdown-foreground);
			border: 1px solid var(--vscode-dropdown-border);
			border-radius: 2px;
			z-index: 2000;
			display: none;
			box-shadow: 0 2px 8px var(--vscode-widget-shadow);
		}

		.unified-btn-split-menu-item {
			padding: 8px 10px;
			cursor: pointer;
			font-size: 12px;
			white-space: nowrap;
		}

		.unified-btn-split-menu-item:hover {
			background: var(--vscode-list-hoverBackground);
		}

		/* ==========================================================================
		   END UNIFIED BUTTON SYSTEM
		   ========================================================================== */

		.kusto-copilot-chat {
			margin: 0;
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			padding: 0;
			background: var(--vscode-editorWidget-background);
			color: var(--vscode-foreground);
			display: flex;
			flex-direction: column;
			min-height: 0;
			width: 100%;
			flex: 1 1 auto;
		}

		.kusto-copilot-split {
			display: flex;
			gap: 0;
			flex: 1 1 auto;
			min-height: 0;
		}

		.kusto-copilot-chat-pane {
			flex: 0 0 360px;
			width: 360px;
			min-width: 240px;
			min-height: 0;
			display: flex;
			flex-direction: column;
			align-items: stretch;
			padding: 0;
			margin: 0;
		}

		/* Chart section builder */
		.chart-box .query-editor {
			display: flex;
			flex-direction: column;
			height: 100%;
			min-height: 0;
			background: var(--vscode-editor-background);
			color: var(--vscode-foreground);
			overflow: hidden;
		}

		.chart-box .query-editor-wrapper {
			border: none;
			overflow: hidden;
		}

		.kusto-chart-builder {
			display: flex;
			flex-direction: column;
			gap: 10px;
			padding: 8px;
			min-height: 0;
			height: 100%;
			background: var(--vscode-editor-background);
			color: var(--vscode-foreground);
			overflow: hidden;
		}

		.kusto-chart-controls {
			display: flex;
			flex-direction: column;
			gap: 8px;
			overflow: visible;
			flex-shrink: 0;
		}

		.kusto-chart-row {
			display: flex;
			align-items: center;
			gap: 10px;
			flex-wrap: wrap;
		}

		.kusto-chart-row label,
		.kusto-chart-mapping-row label {
			font-size: 12px;
			white-space: nowrap;
			min-width: 40px;
		}

		/* Legend label doesn't need the extra width for alignment */
		.kusto-chart-mapping-row label.kusto-chart-label-legend {
			min-width: auto;
		}

		/* Hide the 'Type' label at narrow widths, but keep the chart type picker visible */
		@media (max-width: 450px) {
			.kusto-chart-row-type > label {
				display: none;
			}
		}

		.kusto-chart-row-type {
			margin-bottom: 4px;
		}

		.kusto-chart-row-type > label {
			align-self: center;
		}

		/* Align X/Y mapping row labels with Data label above */
		.kusto-chart-mapping-row > label:first-child {
			min-width: 32px;
		}

		.kusto-chart-row select,
		.kusto-chart-mapping-row select {
			min-width: 140px;
		}

		.kusto-chart-row .select-wrapper,
		.kusto-chart-mapping-row .select-wrapper {
			min-width: 140px;
		}

		.kusto-chart-mapping {
			margin-top: 2px;
		}

		.kusto-chart-mapping-row {
			display: flex;
			align-items: center;
			gap: 10px;
			flex-wrap: wrap;
		}

		/* Keep label + dropdown together as a unit when wrapping */
		.kusto-chart-field-group {
			display: inline-flex;
			align-items: center;
			gap: 10px;
			flex-wrap: nowrap;
		}

		/* Chart dropdown menus need position:fixed to escape the overflow:hidden container */
		.kusto-chart-controls .kusto-dropdown-menu {
			position: fixed;
		}

		.kusto-chart-canvas {
			width: 100%;
			height: 100%;
			flex: 1 1 auto;
			min-height: 0;
			background: var(--vscode-editor-background);
			color: var(--vscode-foreground);
			overflow: hidden;
		}

		/* Chart type picker with icons */
		.kusto-chart-type-picker {
			display: flex;
			flex-wrap: wrap;
			gap: 4px;
			align-items: center;
		}

		.kusto-chart-type-btn {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			gap: 2px;
			padding: 4px 6px;
			min-width: 44px;
			border: 1px solid transparent;
			border-radius: 4px;
			background: transparent;
			color: var(--vscode-foreground);
			cursor: pointer;
			transition: all 0.1s ease;
		}

		.kusto-chart-type-btn:hover {
			background: var(--vscode-toolbar-hoverBackground);
		}

		.kusto-chart-type-btn.is-active {
			background: var(--vscode-toolbar-activeBackground, var(--vscode-actionBar-toggledBackground, rgba(128, 128, 128, 0.25)));
			color: var(--vscode-foreground);
			border-color: transparent;
		}

		.kusto-chart-type-btn svg {
			width: 22px;
			height: 22px;
			color: var(--vscode-foreground);
			opacity: 0.7;
		}

		.kusto-chart-type-btn:hover svg {
			opacity: 0.9;
		}

		.kusto-chart-type-btn.is-active svg {
			opacity: 1;
			color: var(--vscode-foreground);
		}

		.kusto-chart-type-btn span {
			font-size: 10px;
			text-align: center;
			white-space: nowrap;
		}

		/* Data labels toggle */
		.kusto-chart-toggle-label {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			cursor: pointer;
			user-select: none;
			padding: 4px 8px;
			border-radius: 4px;
			margin-left: 8px;
		}

		.kusto-chart-toggle-label:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.kusto-chart-toggle-label span {
			font-size: 12px;
			white-space: nowrap;
		}

		.kusto-chart-toggle {
			width: 16px;
			height: 16px;
			accent-color: var(--vscode-focusBorder);
			cursor: pointer;
		}

		.kusto-copilot-editor-pane {
			flex: 1 1 auto;
			min-width: 0;
			min-height: 0;
			display: flex;
			flex-direction: column;
		}

		.kusto-copilot-splitter.query-editor-resizer {
			flex: 0 0 12px;
			width: 12px;
			height: auto;
			cursor: ew-resize;
			background: var(--vscode-editor-background);
			border-top: none;
			position: relative;
			padding: 0;
			margin: 0;
		}

		.kusto-copilot-splitter.query-editor-resizer::after {
			width: 4px;
			height: 34px;
			background-image: repeating-linear-gradient(
				90deg,
				var(--vscode-input-placeholderForeground),
				var(--vscode-input-placeholderForeground) 1px,
				transparent 1px,
				transparent 3px
			);
		}

		.kusto-copilot-chat-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 10px;
			margin: 0;
			padding: 8px 8px 0;
		}

		.kusto-copilot-chat-title {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			font-size: 12px;
			font-weight: 600;
			color: var(--vscode-foreground);
		}

		.kusto-copilot-chat-title img.copilot-logo {
			width: 16px;
			height: 16px;
			vertical-align: middle;
		}

		.kusto-copilot-chat-model {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			font-size: 12px;
			min-width: 0;
		}

		.kusto-copilot-chat-model .select-wrapper {
			margin: 0;
		}

		.kusto-copilot-chat-model-dropdown {
			/* Shrink with the chat pane width; cap default size a bit smaller. */
			width: 100%;
			max-width: 225px;
			min-width: 0;
		}

		/* Square corners for the custom dropdown inside the Copilot chat only. */
		.kusto-copilot-chat .kusto-dropdown-btn,
		.kusto-copilot-chat .kusto-dropdown-menu {
			border-radius: 0;
		}

		/* Copilot chat can be toggled per query editor. When hidden, the layout should
		   behave like the original editor-only wrapper (no splitter, no blank space). */
		.kusto-copilot-split.kusto-copilot-chat-hidden .kusto-copilot-chat-pane,
		.kusto-copilot-split.kusto-copilot-chat-hidden .kusto-copilot-splitter {
			display: none;
		}

		.kusto-copilot-split.kusto-copilot-chat-hidden .kusto-copilot-editor-pane {
			flex: 1 1 auto;
			width: 100%;
			min-width: 0;
		}

		.kusto-copilot-chat-model label {
			color: var(--vscode-descriptionForeground);
		}

		.kusto-copilot-chat-model select {
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			padding: 3px 6px;
			font-size: 12px;
		}

		.kusto-copilot-chat-messages {
			max-height: none;
			flex: 1 1 auto;
			min-height: 0;
			overflow: auto;
			display: flex;
			flex-direction: column;
			gap: 6px;
			padding: 6px;
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			background: var(--vscode-editor-background);
			margin: 8px 8px 8px;
		}

		.kusto-copilot-chat-msg {
			font-size: 12px;
			line-height: 1.35;
			white-space: pre-wrap;
			word-break: break-word;
			padding: 6px 8px;
			border-radius: 0;
			border: 1px solid var(--vscode-input-border);
		}
		/* Remove any default margins to avoid extra vertical gaps */
		.kusto-copilot-chat-msg {
			margin: 0;
		}
		/* When two assistant (received) messages are adjacent, cancel the container gap
		   by pulling them together so they appear visually grouped. */
		.kusto-copilot-chat-msg-assistant + .kusto-copilot-chat-msg-assistant {
			margin-top: -6px;
			margin-bottom: 0;
		}
		.kusto-copilot-chat-msg-user {
			align-self: flex-end;
			background: var(--vscode-editorWidget-background);
		}
		.kusto-copilot-chat-msg-assistant {
			align-self: flex-start;
			background: var(--vscode-editorWidget-background);
			color: var(--vscode-foreground);
			border: none;
		}

		.kusto-copilot-chat-input {
			display: flex;
			gap: 8px;
			align-items: flex-start;
			margin: 0;
			padding: 0 8px 8px;
		}

		.kusto-copilot-chat-actions {
			display: flex;
			flex-direction: column;
			gap: 6px;
			align-items: stretch;
		}

		.kusto-copilot-chat-input textarea {
			flex: 1;
			resize: vertical;
			min-height: 62px;
			height: 62px;
			max-height: 160px;
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			padding: 6px 8px;
			font-size: 12px;
			line-height: 1.35;
		}

		/* Copilot Send button */
		.kusto-copilot-chat-send {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: var(--vscode-button-background);
			border: 1px solid var(--vscode-button-border);
			border-radius: 0;
			color: var(--vscode-button-foreground);
			cursor: pointer;
			padding: 6px 10px;
			font-size: 12px;
		}
		.kusto-copilot-chat-send:hover:not(:disabled) {
			background: var(--vscode-button-hoverBackground);
		}
		.kusto-copilot-chat-send .kusto-copilot-chat-send-spinner {
			display: none;
			width: 14px;
			height: 14px;
			box-sizing: border-box;
			border-radius: 999px;
			border: 2px solid currentColor;
			border-top-color: transparent;
			animation: kusto-copilot-spin 0.9s linear infinite;
		}
		.kusto-copilot-chat-send.is-running {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 6px;
		}
		.kusto-copilot-chat-send.is-running .kusto-copilot-chat-send-label {
			display: none;
		}
		.kusto-copilot-chat-send.is-running .kusto-copilot-chat-send-spinner {
			display: inline-block;
		}
		@keyframes kusto-copilot-spin {
			0% { transform: rotate(0deg); }
			100% { transform: rotate(360deg); }
		}
		.kusto-copilot-chat-send:disabled {
			opacity: 0.6;
			cursor: default;
		}

		.kusto-copilot-chat-cancel {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			color: var(--vscode-foreground);
			cursor: pointer;
			padding: 6px 10px;
			font-size: 12px;
		}
		.kusto-copilot-chat-cancel:hover:not(:disabled) {
			background: var(--vscode-button-secondaryHoverBackground);
		}
		.kusto-copilot-chat-cancel:disabled {
			opacity: 0.6;
			cursor: default;
		}

		/* Copilot tools button */
		.kusto-copilot-chat-tools {
			display: flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			color: var(--vscode-foreground);
			cursor: pointer;
			width: 28px;
			height: 28px;
			padding: 0;
			flex: 0 0 auto;
		}
		.kusto-copilot-chat-tools .codicon {
			font-size: 16px;
			line-height: 1;
		}
		.kusto-copilot-chat-tools:hover {
			background: var(--vscode-button-secondaryHoverBackground);
		}
		.kusto-copilot-chat-tools.is-active {
			background: var(--vscode-toolbar-activeBackground, var(--vscode-actionBar-toggledBackground, rgba(128, 128, 128, 0.25)));
			color: var(--vscode-foreground);
		}
		.kusto-copilot-chat-tools.is-active:hover {
			background: var(--vscode-toolbar-activeBackground, var(--vscode-actionBar-toggledBackground, rgba(128, 128, 128, 0.25)));
		}

		.kusto-copilot-tools-panel {
			margin: 8px 8px 0;
			padding: 8px;
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			background: var(--vscode-editorWidget-background);
			color: var(--vscode-foreground);
			font-size: 12px;
		}
		.kusto-copilot-tools-panel-title {
			font-weight: 600;
			margin: 0 0 6px;
			color: var(--vscode-foreground);
		}
		.kusto-copilot-tools-list {
			display: flex;
			flex-direction: column;
			gap: 6px;
		}
		.kusto-copilot-tools-group-title {
			margin: 10px 0 2px;
			font-weight: 600;
			color: var(--vscode-descriptionForeground);
			letter-spacing: 0.2px;
			text-transform: uppercase;
			font-size: 11px;
		}
		.kusto-copilot-tools-group-title.is-first {
			margin-top: 0;
		}
		.kusto-copilot-tool-item {
			display: flex;
			gap: 8px;
			align-items: flex-start;
			cursor: pointer;
			user-select: none;
		}
		.kusto-copilot-tool-checkbox {
			margin-top: 2px;
		}
		.kusto-copilot-tool-text {
			display: flex;
			flex-direction: column;
			gap: 2px;
			min-width: 0;
		}
		.kusto-copilot-tool-name {
			color: var(--vscode-foreground);
		}
		.kusto-copilot-tool-desc {
			color: var(--vscode-descriptionForeground);
			font-size: 11px;
			line-height: 1.25;
		}
		.kusto-copilot-chat-cancel:hover:not(:disabled) {
			background: var(--vscode-inputValidation-errorBackground);
			color: var(--vscode-inputValidation-errorForeground);
			border-color: var(--vscode-inputValidation-errorBorder);
			opacity: 0.95;
		}
		.kusto-copilot-chat-cancel:disabled {
			opacity: 0.6;
			cursor: default;
		}

		.kusto-copilot-tool-header {
			display: flex;
			gap: 8px;
			align-items: center;
			justify-content: space-between;
			margin-bottom: 6px;
		}
		.kusto-copilot-tool-link {
			color: var(--vscode-textLink-foreground);
			text-decoration: none;
			font-size: 12px;
			white-space: nowrap;
		}
		.kusto-copilot-tool-link:hover {
			text-decoration: underline;
		}
		.kusto-copilot-tool-json {
			margin: 0;
			padding: 8px;
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			background: var(--vscode-editor-background);
			color: var(--vscode-foreground);
			font-family: var(--vscode-editor-font-family);
			font-size: 11px;
			line-height: 1.35;
			max-height: 220px;
			overflow: auto;
			white-space: pre;
		}

		/* Generic section header row used by non-KQL boxes */
		.section-header-row {
			display: flex;
			gap: 8px;
			align-items: center;
			justify-content: space-between;
			margin-bottom: 8px;
		}

		.section-drag-handle {
			opacity: 1;
			background: transparent;
			border: 1px solid transparent;
			color: var(--vscode-descriptionForeground);
			border-radius: 4px;
			margin: 0;
			width: 12px;
			height: 24px;
			padding: 0;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			cursor: grab;
			flex: 0 0 auto;
		}

		.section-drag-handle:hover {
			background: var(--vscode-list-hoverBackground);
			border-color: var(--vscode-input-border);
			color: var(--vscode-foreground);
		}

		.section-drag-handle:active {
			cursor: grabbing;
		}

		.section-drag-handle:focus-visible {
			outline: none;
			border-color: var(--vscode-focusBorder);
			opacity: 1;
		}

		.section-drag-handle-glyph {
			font-size: 14px;
			line-height: 1;
			letter-spacing: -1px;
		}

		.query-name-group {
			display: flex;
			gap: 0;
			align-items: center;
			flex: 1 1 150px;
			min-width: 100px;
		}

		.section-header-row.md-section-header {
			display: grid;
			grid-template-columns: 1fr auto 1fr;
			align-items: center;
			gap: 8px;
		}

		.section-header-row.md-section-header .md-header-center {
			grid-column: 2;
			justify-self: center;
			display: inline-flex;
			align-items: center;
			min-width: 0;
		}

		.query-box.is-md-preview .md-header-center {
			visibility: hidden;
			pointer-events: none;
		}

		/* Markdown Preview sizing:
		   - default: auto-expand to the full rendered height
		   - once user resizes: constrain to wrapper height and scroll inside */
		.query-box.is-md-preview .markdown-viewer {
			border: none;
			border-radius: 0;
			background: transparent;
			padding: 0;
			min-height: 0;
		}

		/* Preview: remove the border around the TOAST UI area (the wrapper), while keeping the
		   overall section chrome (header, spacing) intact. */
		.query-box.is-md-preview .query-editor-wrapper {
			border: none;
			background: transparent;
		}

		/* Preview mode: remove any TOAST UI viewer chrome (border/outline) without changing
		   the section wrapper border. */
		.query-box.is-md-preview .markdown-viewer .toastui-editor-defaultUI {
			border: none !important;
			outline: none !important;
			box-shadow: none !important;
		}
		.query-box.is-md-preview .markdown-viewer .toastui-editor-contents {
			border: none !important;
			outline: none !important;
			box-shadow: none !important;
			/* Preview (read-only) spacing tweaks:
			   - add +20px top space vs default viewer padding (10px -> 30px)
			   - add a right gutter so content isn't flush to the scrollbar */
			padding: 30px 25px 10px 10px;
		}
		.query-box.is-md-preview-auto .query-editor-wrapper {
			height: auto;
			min-height: 0;
			overflow: visible;
		}
		.query-box.is-md-preview-auto .markdown-viewer {
			flex: 0 0 auto;
			overflow: visible;
		}
		.query-box.is-md-preview-fixed .query-editor-wrapper {
			/* Keep the wrapper constrained so the resizer can make it smaller. */
			overflow: hidden;
		}
		.query-box.is-md-preview-fixed .markdown-viewer {
			flex: 1 1 auto;
			overflow: auto;
		}

		.query-box.is-md-preview {
			margin-bottom: 20px;
		}

		.query-box.is-md-preview .markdown-viewer code,
		.query-box.is-md-preview .markdown-viewer pre {
			background: transparent;
		}

		.section-header-row.md-section-header .section-actions {
			grid-column: 3;
			justify-self: end;
			gap: 2px;
		}

		.section-title {
			font-size: 12px;
			color: var(--vscode-foreground);
			font-weight: 600;
		}

		.section-actions {
			display: inline-flex;
			gap: 8px;
			align-items: center;
		}

		/* URL header: URL input + view toggle + close on one line */
		.section-header-row.url-section-header {
			justify-content: flex-start;
			gap: 8px;
		}

		.section-header-row.url-section-header .url-name {
			/* Keep the URL name tight to the drag handle (remove the flex gap just for this pair). */
			margin-left: -8px;
			flex: 0 0 auto;
			min-width: 25px;
			max-width: 250px;
			width: 25px;
		}

		.section-header-row.url-section-header .url-input {
			flex: 1 1 auto;
			min-width: 220px;
		}

		.section-title-edit {
			display: inline-flex;
			gap: 2px;
			align-items: center;
			min-width: 0;
		}

		.md-header-left {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			min-width: 0;
		}

		.section-title-input {
			font-size: 12px;
			font-weight: 600;
			color: var(--vscode-foreground);
			background: transparent;
			border: 1px solid transparent;
			border-radius: 4px;
			padding: 2px 4px;
			min-width: 56px;
			max-width: 320px;
		}

		.section-title-input:hover {
			border-color: var(--vscode-input-border);
		}

		.section-title-input:focus {
			outline: none;
			border-color: var(--vscode-focusBorder);
		}

		.section-title-pen {
			background: transparent;
			border: 1px solid transparent;
			color: var(--vscode-foreground);
			cursor: pointer;
			padding: 2px 3px;
			border-radius: 4px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			line-height: 0;
		}

		.section-title-pen:hover {
			background: var(--vscode-list-hoverBackground);
			border-color: var(--vscode-input-border);
		}

		.section-btn {
			background: transparent;
			border: 1px solid var(--vscode-input-border);
			color: var(--vscode-foreground);
			cursor: pointer;
			padding: 4px 8px;
			font-size: 12px;
			border-radius: 4px;
		}

		.section-btn:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.md-tabs {
			display: inline-flex;
			gap: 2px;
			align-items: center;
			border: none;
			border-radius: 0;
			overflow: visible;
			margin: 0;
			background: transparent;
		}

		.md-tabs-divider {
			width: 1px;
			height: 16px;
			background: var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.35))));
			margin: 0 4px;
			opacity: 0.9;
		}

		.md-tab {
			background: transparent;
			border: 1px solid transparent;
			color: var(--vscode-foreground);
			cursor: pointer;
			padding: 0;
			width: 28px;
			height: 28px;
			border-radius: 4px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			line-height: 0;
		}

		/* Make maximize → show/hide spacing match show/hide → close spacing. */
		.md-tab.md-max-btn {
			margin-right: 6px;
		}

		.md-tab.md-mode-btn {
			width: auto;
			padding: 0 10px;
			font-size: 12px;
			line-height: 1;
			height: 28px;
			min-width: 68px;
			justify-content: center;
		}

		.md-tab svg {
			display: block;
		}

		.md-tab:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.md-tab.is-active {
			background: var(--vscode-toolbar-activeBackground, var(--vscode-actionBar-toggledBackground, rgba(128, 128, 128, 0.25)));
			color: var(--vscode-foreground);
		}

		/* Markdown section preview mode (Preview button): hide the editor and show the viewer. */
		.query-box.is-md-preview .kusto-markdown-editor {
			display: none !important;
		}
		.query-box.is-md-preview .markdown-viewer {
			display: block !important;
		}

		/* Query section collapse: keep only the top header row (name + buttons). */
		.query-box.is-collapsed .query-header-row-bottom,
		.query-box.is-collapsed .query-editor-wrapper,
		.query-box.is-collapsed .query-actions,
		.query-box.is-collapsed .optimize-config,
		.query-box.is-collapsed .results-wrapper,
		.query-box.is-collapsed .comparison-summary-banner {
			display: none !important;
		}

		/* Collapsed sections need a bit more breathing room at the bottom. */
		.query-box.is-collapsed {
			padding-bottom: 2px;
		}

		.markdown-viewer {
			border: 1px solid var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.25))));
			border-radius: 4px;
			padding: 0;
			background: transparent;
			min-height: 80px;
			font-size: 13px;
			flex: 1 1 auto;
			min-width: 0;
			overflow: auto;
		}

		.markdown-viewer .toastui-editor-contents {
			background: transparent;
			color: var(--vscode-editor-foreground);
			/* Preview should read like docs, not like code. */
			font-family: var(--vscode-font-family);
			font-size: 13px;
			padding: 10px;
		}

		.markdown-viewer code {
			background: var(--vscode-textBlockQuote-background);
			padding: 1px 3px;
			border-radius: 3px;
			font-family: var(--vscode-editor-font-family);
		}

		/* Markdown editor (TOAST UI Editor) - keep only the toolbar + editor surface.
		   The section header controls visibility, so hide the editor's internal preview tabs/panes. */
		.kusto-markdown-editor .toastui-editor-defaultUI {
			border: none;
			border-radius: 0;
			/* Keep the editor UI (toolbar, dialogs) in VS Code UI font. */
			font-family: var(--vscode-font-family);
			font-size: 13px;
			background: transparent;
			color: var(--vscode-editor-foreground);
		}

		.kusto-markdown-editor .toastui-editor-defaultUI-toolbar {
			border-bottom: 1px solid var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.25)))) !important;
			background: transparent !important;
			color: var(--vscode-foreground);
			height: 35px;
			min-height: 35px;
			padding: 0 10px;
			align-items: center;
			border-radius: 0;
		}

		.kusto-markdown-editor .toastui-editor-toolbar {
			height: 35px;
		}

		/* Toast UI renders each toolbar control inside a wrapper div. Normalizing that wrapper
		   is the most reliable way to keep <button> and the scroll-sync <label> aligned. */
		.kusto-markdown-editor .toastui-editor-toolbar-item-wrapper {
			display: flex;
			align-items: center;
			height: 32px;
			margin: 0 2px;
			line-height: 0;
			box-sizing: border-box;
		}

		/* Avoid global webview button styling from clobbering Toast UI toolbar icons.
		   (We keep this minimal and only set background-color, never the background shorthand.) */
		.kusto-markdown-editor .toastui-editor-defaultUI-toolbar button {
			background-color: transparent;
			color: inherit;
			width: 32px;
			height: 32px;
			margin: 0;
			padding: 0;
			border: 1px solid transparent;
			border-radius: 0;
			line-height: 0;
			box-sizing: border-box;
		}

		/* Toast UI's "Scroll" sync toggle is a <label> (not a <button>). Our toolbar uses
		   tighter spacing than Toast UI's defaults, so we restyle it to behave like a normal
		   32px toolbar item and let flexbox handle vertical alignment. */
		.kusto-markdown-editor .toastui-editor-defaultUI-toolbar .scroll-sync {
			display: inline-flex;
			align-items: center;
			justify-content: space-between;
			box-sizing: border-box;
			position: relative;
			width: 70px;
			height: 32px;
			margin: 0;
			padding: 0 6px;
			line-height: normal;
			vertical-align: middle;
		}

		.kusto-markdown-editor .toastui-editor-defaultUI-toolbar .scroll-sync::before {
			position: static;
			left: auto;
			transform: none;
		}

		.kusto-markdown-editor .toastui-editor-defaultUI-toolbar .scroll-sync .switch {
			position: relative;
			top: auto;
			left: auto;
			right: auto;
			bottom: auto;
			width: 25px;
			height: 10px;
		}

		/* Keep hit-target size, but shrink the actual glyphs/icons ~25%. */
		.kusto-markdown-editor .toastui-editor-defaultUI-toolbar .toastui-editor-toolbar-icons {
			transform: scale(0.75);
			transform-origin: center;
		}

		.kusto-markdown-editor .toastui-editor-defaultUI-toolbar button:hover {
			background-color: var(--vscode-list-hoverBackground);
		}

		.kusto-markdown-editor .toastui-editor-defaultUI-toolbar button:active {
			opacity: 1;
		}

		.kusto-markdown-editor .toastui-editor-toolbar-group {
			align-items: center;
		}

		.kusto-markdown-editor .toastui-editor-toolbar-divider {
			height: 14px;
			margin: 11px 8px;
			background-color: var(--vscode-input-border);
		}

		/* Toast UI's built-in mode switch and preview UI are enabled.
		   (previewStyle: 'vertical' shows a split preview when in Markdown mode.) */

		/* Ensure the editable surface inherits background from container.
		   This allows Toast UI to match Monaco's actual rendered background. */
		.kusto-markdown-editor .toastui-editor-main,
		.kusto-markdown-editor .toastui-editor-md-container,
		.kusto-markdown-editor .toastui-editor-md-container .toastui-editor,
		.kusto-markdown-editor .toastui-editor-main .ProseMirror {
			background: transparent !important;
			color: var(--vscode-editor-foreground) !important;
			font-size: 13px;
		}

		/* WYSIWYG mode container - transparent to inherit from wrapper. */
		.kusto-markdown-editor .toastui-editor-ww-container,
		.kusto-markdown-editor .toastui-editor-ww-container .toastui-editor-contents {
			background: transparent !important;
			color: var(--vscode-editor-foreground) !important;
		}

		/* The inline markdown preview - transparent to inherit from wrapper. */
		.kusto-markdown-editor .toastui-editor-md-preview,
		.kusto-markdown-editor .toastui-editor-md-preview .toastui-editor-contents {
			background: transparent !important;
			color: var(--vscode-editor-foreground) !important;
		}

		/* Markdown editing surface: use the editor (monospace) font. */
		.kusto-markdown-editor .toastui-editor-md-container .toastui-editor {
			font-family: var(--vscode-editor-font-family) !important;
		}

		/* WYSIWYG editing surface: use the UI font for better readability. */
		.kusto-markdown-editor .toastui-editor-main .ProseMirror {
			font-family: var(--vscode-font-family) !important;
		}

		.kusto-markdown-editor .toastui-editor-main .ProseMirror {
			caret-color: var(--vscode-editor-foreground);
		}

		/* Match typical VS Code input focus cues for the editor outline/border. */
		.kusto-markdown-editor .toastui-editor-defaultUI {
			border: none;
			outline: none;
		}
		/* Intentionally do not apply a focus ring to the whole Toast UI editor. */

		.python-output {
			border: 1px solid var(--vscode-input-border);
			border-radius: 4px;
			background: var(--vscode-editor-background);
			padding: 10px;
			font-family: var(--vscode-editor-font-family);
			font-size: 12px;
			white-space: pre-wrap;
			overflow: auto;
			max-height: 320px;
		}

		.url-output {
			border: none;
			border-radius: 0;
			background: transparent;
			padding: 0;
			font-family: var(--vscode-editor-font-family);
			font-size: 12px;
			overflow: auto;
			max-height: none;
			flex: 1 1 auto;
			min-height: 0;
			display: flex;
			flex-direction: column;
			min-width: 0;
		}

		.url-output-wrapper {
			position: relative;
			width: 100%;
			min-height: 120px;
			height: 120px;
			margin: 8px 0 0;
			overflow: hidden;
			display: flex;
			flex-direction: column;
			background: transparent;
		}

		/* URL boxes: no extra gap below the resize grip. */
		.query-box.url-box {
			padding-bottom: 0;
		}

		/* When the URL section is hidden/collapsed, give it a bit more breathing room. */
		.query-box.url-box.is-url-collapsed {
			margin-bottom: 26px;
		}

		.url-row {
			display: flex;
			gap: 8px;
			align-items: center;
			flex-wrap: wrap;
			margin-bottom: 8px;
		}

		.url-input {
			flex: 1 1 420px;
			min-width: 220px;
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 4px;
			padding: 6px 8px;
			font-size: 12px;
		}

		.url-input:focus {
			outline: none;
			border-color: var(--vscode-focusBorder);
		}

		.url-collapsed {
			display: none;
		}

		.query-box {
			border: 1px solid var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.25))));
			border-radius: 0;
			padding: 12px;
			margin-bottom: 16px;
			background: var(--vscode-editor-background);
			/* Uniform lift on all edges. */
			box-shadow: 0 2px 10px var(--vscode-widget-shadow);
		}

		/* Let the results resize bar sit flush to the section bottom. */
		.query-box {
			padding-bottom: 0;
		}

		.query-box.is-optimized-comparison {
			background: var(--vscode-list-inactiveSelectionBackground);
			background: color-mix(in srgb, var(--vscode-list-activeSelectionBackground) 18%, transparent);
			border: 1px solid var(--vscode-list-activeSelectionBackground);
			color: var(--vscode-foreground);
		}

		.query-box.is-optimized-comparison .query-header-row-bottom {
			display: none;
		}

		.query-box.has-linked-optimization .cache-controls {
			display: none;
		}

		.results-wrapper {
			position: relative;
			width: 100%;
			min-height: 0;
			margin: 8px 0 0;
			overflow: hidden;
			display: flex;
			flex-direction: column;
			background: transparent;
			/* Separator line between actions and results header */
			border-top: 1px solid var(--vscode-panel-border);
			border-radius: 0;
		}

		.results-wrapper .results {
			flex: 1 1 auto;
			min-height: 0;
			overflow: hidden;
			display: flex;
			flex-direction: column;
			border: none;
			border-radius: 0;
			background: transparent;
		}

		/* Query results: the table container is the single scroller (avoid double scrollbars). */
		.results-wrapper .table-container {
			display: block;
			flex: 1 1 auto;
			min-height: 0;
			min-width: 0;
			width: 100%;
			max-width: 100%;
			max-height: none;
			overflow-x: auto;
			overflow-y: auto;
			border: none;
			border-radius: 0;
			margin-bottom: 0;
		}

		/* Add a bit of breathing room above the grabber. */
		.results-wrapper .query-editor-resizer {
			margin-top: 0;
		}

		/* Put the grip at the very bottom for results resizing */
		.results-wrapper .query-editor-resizer::after {
			top: 100%;
			transform: translate(-50%, -100%);
		}

		.query-header {
			display: flex;
			flex-direction: column;
			gap: 8px;
			margin-bottom: 8px;
		}

		.query-header-row {
			display: flex;
			gap: 8px;
			align-items: center;
			flex-wrap: wrap;
		}

		.query-header-row-top {
			flex-wrap: nowrap;
		}

		/*
			The bottom header row (cluster/database/favorites + icon buttons) should prefer
			squeezing controls rather than wrapping them onto multiple lines, so width-based
			shrinking behaves smoothly.
		*/
		.query-header-row-bottom {
			flex-wrap: nowrap;
			min-width: 0;
		}

		.query-name {
			background: transparent;
			border: 1px solid transparent;
			color: var(--vscode-foreground);
			padding: 4px 8px;
			font-size: 12px;
			flex: 1 1 150px;
			min-width: 100px;
		}

		.query-name:hover {
			border-color: var(--vscode-input-border);
		}

		.query-name:focus {
			outline: none;
			border-color: var(--vscode-focusBorder);
		}

		.select-wrapper {
			position: relative;
			flex: 1 1 200px;
			min-width: 40px;
			display: flex;
			align-items: center;
		}

		.select-wrapper.has-icon .select-icon {
			position: absolute;
			left: 8px;
			top: 50%;
			transform: translateY(-50%);
			pointer-events: none;
			z-index: 1;
			opacity: 0.95;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 16px;
			height: 16px;
		}

		.select-wrapper.has-icon select {
			padding-left: 28px;
		}

		.select-wrapper.has-icon .kusto-dropdown-btn,
		.select-wrapper.has-icon .kusto-favorites-btn {
			padding-left: 28px;
		}

		/* Hidden backing select used to preserve existing code paths while using the unified dropdown UI. */
		.kusto-dropdown-hidden-select {
			position: absolute;
			opacity: 0;
			pointer-events: none;
			width: 0;
			height: 0;
			padding: 0;
			margin: 0;
			border: 0;
		}

		.select-wrapper.half-width {
			flex: 0 0 210px;
			width: 210px;
			max-width: 210px;
		}

		/* Favorites dropdown replaces: cluster (210) + database (210) + refresh (28) = 448px */
		.select-wrapper.kusto-favorites-combo {
			/*
				Prefer the full-size layout (~448px), but allow this control to shrink smoothly
				as the available header width decreases.
			*/
			flex: 1 1 448px;
			width: auto;
			max-width: 448px;
			min-width: 108px;
		}

		/*
			Reusable dropdown control (button + menu) that should visually match the native
			select inputs used for cluster/database.
			
			Notes:
			- The favorites dropdown historically used kusto-favorites-* classes.
			- The reusable control uses kusto-dropdown-* classes.
			- We keep both selectors so existing markup remains compatible during refactors.
		*/
		.kusto-dropdown-btn,
		.kusto-favorites-btn {
			width: 100%;
			display: inline-flex;
			align-items: center;
			justify-content: flex-start;
			position: relative;
			background: var(--vscode-dropdown-background);
			color: var(--vscode-dropdown-foreground);
			border: 1px solid var(--vscode-dropdown-border);
			border-radius: 2px;
			/* Slightly taller than native <select> so it aligns with adjacent icon buttons. */
			padding: 6px 24px 6px 8px;
			min-height: 27px;
			font-size: 12px;
			cursor: pointer;
			text-align: left;
		}

		/* Native <select> doesn't visually "hover" in the same way; keep stable styling. */
		.kusto-dropdown-btn:hover,
		.kusto-favorites-btn:hover {
			background: var(--vscode-dropdown-background);
			border-color: var(--vscode-dropdown-border);
		}

		.kusto-dropdown-btn:focus,
		.kusto-favorites-btn:focus {
			outline: none;
			border-color: var(--vscode-focusBorder);
		}

		.kusto-dropdown-btn-text,
		.kusto-favorites-btn-text {
			display: inline-flex;
			align-items: baseline;
			gap: 6px;
			flex: 1 1 auto;
			min-width: 0;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		.kusto-dropdown-btn-caret,
		.kusto-favorites-btn-caret {
			position: absolute;
			right: 3px;
			top: 50%;
			transform: translateY(-50%);
			pointer-events: none;
			width: 16px;
			height: 16px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.kusto-dropdown-btn-caret svg,
		.kusto-favorites-btn-caret svg {
			width: 16px;
			height: 16px;
			fill: currentColor;
			color: var(--vscode-foreground);
			opacity: 0.8;
		}

		.kusto-dropdown-menu,
		.kusto-favorites-menu {
			/*
				Render menus in a fixed-position overlay so they:
				- are not clipped by overflow containers in the header/editor/results
				- can appear above sticky result table headers/row numbers
				The JS dropdown helper positions fixed menus under the button.
			*/
			position: fixed;
			left: 0;
			top: 0;
			/* Allow the menu to grow to fit item text (up to a cap),
			   but never be narrower than the control itself. */
			width: max-content;
			min-width: 100%;
			max-width: 350px;
			max-height: 280px;
			overflow: auto;
			/* Must be above sticky table header/first column and other UI layers. */
			z-index: 100000;
			background: var(--vscode-dropdown-background);
			border: 1px solid var(--vscode-dropdown-border);
			box-shadow: 0 2px 10px var(--vscode-widget-shadow);
			box-sizing: border-box;
		}

		.kusto-dropdown-item,
		.kusto-favorites-item {
			padding: 4px 8px;
			cursor: pointer;
			font-size: 12px;
			line-height: 1.4;
			user-select: none;
			white-space: nowrap;
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 8px;
		}

		.kusto-dropdown-item-main,
		.kusto-favorites-item-main {
			flex: 1 1 auto;
			max-width: 100%;
			min-width: 0;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			display: inline-flex;
			align-items: baseline;
			gap: 6px;
			/* Match the font styling of the dropdown button text for consistency */
			color: var(--vscode-dropdown-foreground);
		}

		.kusto-dropdown-item-main .qe-icon,
		.kusto-favorites-item-main .qe-icon {
			width: 16px;
			height: 16px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			flex: 0 0 16px;
		}

		.kusto-dropdown-item-main .qe-icon svg,
		.kusto-favorites-item-main .qe-icon svg {
			display: block;
		}

		.kusto-dropdown-item.is-active,
		.kusto-favorites-item.is-active {
			background: var(--vscode-list-hoverBackground);
			color: var(--vscode-foreground);
		}

		.kusto-dropdown-item.is-active .kusto-dropdown-item-main,
		.kusto-favorites-item.is-active .kusto-favorites-item-main {
			color: var(--vscode-foreground);
		}

		.kusto-dropdown-item.is-disabled {
			cursor: default;
			color: var(--vscode-descriptionForeground);
			background: transparent;
		}

		.kusto-dropdown-item:focus,
		.kusto-favorites-item:focus {
			outline: none;
		}

		.kusto-dropdown-item:focus-visible,
		.kusto-favorites-item:focus-visible {
			outline: 1px solid var(--vscode-focusBorder);
			outline-offset: -1px;
		}

		.kusto-dropdown-trash,
		.kusto-favorites-trash {
			flex: 0 0 auto;
			width: 24px;
			height: 24px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			border: 1px solid transparent;
			border-radius: 4px;
			color: var(--vscode-descriptionForeground);
			padding: 0;
			visibility: hidden;
			pointer-events: none;
		}

		.kusto-dropdown-item:hover .kusto-dropdown-trash,
		.kusto-dropdown-item.is-active .kusto-dropdown-trash,
		.kusto-dropdown-item:focus-within .kusto-dropdown-trash,
		.kusto-favorites-item:hover .kusto-favorites-trash,
		.kusto-favorites-item.is-active .kusto-favorites-trash,
		.kusto-favorites-item:focus-within .kusto-favorites-trash {
			visibility: visible;
			pointer-events: auto;
		}

		.kusto-dropdown-trash:hover,
		.kusto-favorites-trash:hover {
			background: var(--vscode-list-hoverBackground);
			border-color: var(--vscode-input-border);
			color: var(--vscode-foreground);
		}

		.kusto-dropdown-item:hover,
		.kusto-favorites-item:hover {
			background: var(--vscode-list-hoverBackground);
			color: var(--vscode-foreground);
		}

		.kusto-dropdown-item:hover .kusto-dropdown-item-main,
		.kusto-favorites-item:hover .kusto-favorites-item-main {
			color: var(--vscode-foreground);
		}

		.kusto-dropdown-empty,
		.kusto-favorites-empty {
			padding: 8px;
			font-size: 12px;
			color: var(--vscode-descriptionForeground);
		}

		.kusto-favorites-btn {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-btn alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-btn:focus {
			outline: none;
			border-color: var(--vscode-focusBorder);
		}

		.kusto-favorites-btn-text {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-btn-text alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-primary {
			color: var(--vscode-dropdown-foreground);
			font-weight: 600;
		}

		.kusto-favorites-secondary {
			color: var(--vscode-descriptionForeground);
		}

		.kusto-favorites-btn-caret {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-btn-caret alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-menu {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-menu alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-item {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-item alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-item-main {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-item-main alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-item.is-active {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-item.is-active alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-item:focus {
			outline: none;
		}

		.kusto-favorites-item:focus-visible {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-item:focus-visible alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-trash {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-trash alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-item:hover .kusto-favorites-trash,
		.kusto-favorites-item.is-active .kusto-favorites-trash,
		.kusto-favorites-item:focus-within .kusto-favorites-trash {
			visibility: visible;
			pointer-events: auto;
		}

		.kusto-favorites-trash:hover {
			background: var(--vscode-list-hoverBackground);
			border-color: var(--vscode-input-border);
			color: var(--vscode-foreground);
		}

		.kusto-favorites-item:hover {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-item:hover alias */
			--kusto-noop: 0;
		}

		.kusto-favorites-empty {
			/* kept for backwards compatibility; styling defined by .kusto-dropdown-empty alias */
			--kusto-noop: 0;
		}

		.select-wrapper select {
			background: var(--vscode-dropdown-background);
			color: var(--vscode-dropdown-foreground);
			border: 1px solid var(--vscode-dropdown-border);
			padding: 4px 24px 4px 8px;
			font-size: 12px;
			border-radius: 2px;
			width: 100%;
			cursor: pointer;
		}

		.select-wrapper select:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		/* Unified dropdown styling for chart controls (single-select and multi-select) */
		.kusto-single-select-dropdown,
		.kusto-checkbox-dropdown {
			min-width: 140px;
		}

		/* Match native <select> styling for unified dropdown buttons */
		.kusto-single-select-dropdown .kusto-dropdown-btn,
		.kusto-checkbox-dropdown .kusto-dropdown-btn {
			padding: 4px 24px 4px 8px;
			min-height: auto;
		}

		/* Disabled state for unified dropdown buttons */
		.kusto-dropdown-btn:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		.kusto-checkbox-menu {
			max-height: 200px;
			overflow-y: auto;
		}

		.kusto-checkbox-item {
			display: flex;
			align-items: center;
			gap: 4px;
			padding: 6px 10px;
			cursor: pointer;
			user-select: none;
			justify-content: flex-start;
		}

		.kusto-checkbox-item:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.kusto-checkbox-item input[type="checkbox"] {
			width: 14px;
			height: 14px;
			margin: 0;
			accent-color: var(--vscode-focusBorder);
			cursor: pointer;
			flex-shrink: 0;
		}

		.kusto-checkbox-label {
			font-size: 12px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			flex: 1 1 auto;
		}

		/* Ensure checkbox dropdown button text is left-aligned */
		.kusto-checkbox-dropdown .kusto-dropdown-btn-text {
			text-align: left;
			justify-content: flex-start;
		}

		.kusto-checkbox-item.is-disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		.kusto-checkbox-item.is-disabled input[type="checkbox"] {
			cursor: not-allowed;
		}


		.refresh-btn {
			background: transparent;
			border: 1px solid var(--vscode-input-border);
			color: var(--vscode-foreground);
			cursor: pointer;
			padding: 0;
			font-size: 12px;
			border-radius: 4px;
			display: flex;
			align-items: center;
			justify-content: center;
			line-height: 0;
			min-width: 28px;
			width: 28px;
			height: 28px;
		}

		.refresh-btn:hover {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.refresh-btn svg {
			display: block;
		}

		.refresh-btn.close-btn {
			border: none;
		}

		.refresh-btn.favorite-btn {
			color: var(--vscode-descriptionForeground);
		}

		.refresh-btn.favorite-btn svg {
			fill: none;
		}

		/* Favorite toggle uses .is-active (standardized from .is-favorite) */
		.refresh-btn.favorite-btn.is-favorite,
		.refresh-btn.favorite-btn.is-active {
			color: var(--vscode-charts-yellow);
		}

		.refresh-btn.favorite-btn.is-favorite svg,
		.refresh-btn.favorite-btn.is-active svg {
			fill: currentColor;
		}

		.schema-area {
			margin-left: auto;
			display: flex;
			align-items: center;
			gap: 8px;
			text-align: right;
		}

		/* Cancel button: reuse icon-button sizing but show an error-colored glyph */
		.refresh-btn.cancel-btn {
			border: none;
			color: var(--vscode-errorForeground);
		}

		.select-wrapper.icon-only {
			width: 40px;
			min-width: 40px;
			flex: 0 0 40px;
		}

		.select-wrapper.icon-only select {
			padding-left: 8px;
			padding-right: 8px;
			text-indent: -9999px;
			color: transparent;
		}

		.select-wrapper.icon-only select option {
			text-indent: 0;
			color: var(--vscode-dropdown-foreground);
		}

		@media (max-width: 800px) {
			.query-header .select-wrapper {
				flex: 0 0 40px;
				width: 40px;
				min-width: 40px;
			}

			.query-header .select-wrapper.kusto-favorites-combo {
				/* Override the icon-only sizing so favorites can shrink smoothly instead of snapping. */
				flex: 1 1 448px;
				width: auto;
				min-width: 108px;
				max-width: 448px;
			}

			/* Extra spacing so the DB refresh icon doesn't crowd/overlap the dropdown on the left. */
			.query-header-row-bottom > button.refresh-btn[id$="_refresh"] {
				margin-left: 15px;
			}

			/* In responsive mode, allow the expanded menu to grow to fit content */
			.kusto-dropdown-menu,
			.kusto-favorites-menu {
				width: max-content;
				min-width: 100%;
			}

			.query-header .select-wrapper.half-width {
				flex: 0 0 40px;
				width: 40px;
				max-width: 40px;
			}
			
			.query-header .select-wrapper select {
				padding-left: 8px;
				padding-right: 8px;
				text-indent: -9999px;
				color: transparent;
			}

			.query-header .select-wrapper.has-icon select {
				padding-left: 8px;
			}

			/* (favorites button no longer uses a left icon) */
			
			.query-header .select-wrapper select option {
				text-indent: 0;
				color: var(--vscode-dropdown-foreground);
			}

			.query-header .select-wrapper.has-icon .select-icon {
				left: 50%;
				transform: translate(-50%, -50%);
			}
		}

		.query-editor-wrapper {
			position: relative;
			width: 100%;
			min-height: 120px;
			height: 175px;
			margin: 8px 0;
			border: 1px solid var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.25))));
			border-radius: 2px;
			background: var(--vscode-editor-background);
			/* Allow toolbar dropdown menus to overlay outside the editor frame. */
			overflow: visible;
			display: flex;
			flex-direction: column;
		}

		/* Clip the editor surface (Monaco + banners) so it still respects rounded corners. */
		.qe-editor-clip {
			flex: 1 1 auto;
			min-height: 0;
			overflow: hidden;
			display: flex;
			flex-direction: column;
			border-bottom-left-radius: 2px;
			border-bottom-right-radius: 2px;
		}

		.query-editor-toolbar {
			display: flex;
			align-items: center;
			flex-wrap: nowrap;
			gap: 4px;
			padding: 0 6px;
			height: 35px;
			min-height: 35px;
			border-bottom: 1px solid var(--vscode-input-border, var(--vscode-widget-border, var(--vscode-panel-border, rgba(128,128,128,0.25))));
			background: transparent;
			color: var(--vscode-foreground);
			flex: 0 0 auto;
			border-top-left-radius: 2px;
			border-top-right-radius: 2px;
			overflow: visible;
			position: relative;
		}

		/* Container for toolbar items that can overflow */
		.qe-toolbar-items {
			display: flex;
			align-items: center;
			flex-wrap: nowrap;
			gap: 4px;
			flex: 0 1 auto;
			min-width: 0;
			overflow: hidden;
		}

		/* Overflow "more" button - hidden until needed */
		.qe-toolbar-overflow-wrapper {
			position: relative;
			display: none;
			flex: 0 0 auto;
		}

		.qe-toolbar-overflow-wrapper.is-visible {
			display: inline-flex;
		}

		.qe-toolbar-overflow-btn {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			border: 1px solid transparent;
			border-radius: 4px;
			color: var(--vscode-foreground);
			cursor: pointer;
			padding: 4px 6px;
			height: 28px;
			min-width: 28px;
			font-weight: bold;
			font-size: 14px;
			letter-spacing: 1px;
		}

		.qe-toolbar-overflow-btn:hover {
			background: var(--vscode-toolbar-hoverBackground, var(--vscode-list-hoverBackground));
			border-color: var(--vscode-toolbar-hoverBackground, var(--vscode-list-hoverBackground));
		}

		.qe-toolbar-overflow-btn.is-active {
			background: var(--vscode-toolbar-activeBackground, var(--vscode-actionBar-toggledBackground, rgba(128, 128, 128, 0.25)));
		}

		/* Overflow menu dropdown - uses fixed positioning to escape overflow:hidden containers */
		.qe-toolbar-overflow-menu {
			position: fixed;
			z-index: 1000;
			min-width: 180px;
			background: var(--vscode-dropdown-background, var(--vscode-editorWidget-background));
			border: 1px solid var(--vscode-dropdown-border, var(--vscode-widget-border, rgba(128, 128, 128, 0.35)));
			border-radius: 4px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.16);
			padding: 4px 0;
		}

		/* Items inside overflow menu */
		.qe-toolbar-overflow-item {
			display: flex;
			align-items: center;
			gap: 8px;
			padding: 6px 12px;
			cursor: pointer;
			color: var(--vscode-foreground);
			font-size: 13px;
			white-space: nowrap;
		}

		.qe-toolbar-overflow-item:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.qe-toolbar-overflow-item .qe-icon {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 16px;
			height: 16px;
			flex: 0 0 auto;
		}

		.qe-toolbar-overflow-item .qe-toolbar-overflow-label {
			flex: 1 1 auto;
		}

		/* Copilot logo in overflow menu - match toolbar styling */
		.qe-toolbar-overflow-item img.copilot-logo {
			width: 16px;
			height: 16px;
			display: block;
		}

		body.vscode-dark .qe-toolbar-overflow-item img.copilot-logo,
		body.vscode-high-contrast .qe-toolbar-overflow-item img.copilot-logo,
		body.vscode-high-contrast-light .qe-toolbar-overflow-item img.copilot-logo {
			filter: invert(1);
		}

		.qe-toolbar-overflow-item .copilot-logo-svg {
			width: 16px;
			height: 16px;
			display: block;
			stroke-width: 1.8px;
		}

		.qe-toolbar-overflow-sep {
			height: 1px;
			background: var(--vscode-widget-border, rgba(128, 128, 128, 0.35));
			margin: 4px 8px;
		}

		/* Mark toolbar items as hidden when in overflow */
		.query-editor-toolbar-btn.qe-in-overflow,
		.query-editor-toolbar-sep.qe-in-overflow,
		.qe-toolbar-menu-wrapper.qe-in-overflow {
			display: none !important;
		}

		.qe-missing-clusters-banner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 10px;
			padding: 6px 8px;
			border-bottom: 1px solid var(--vscode-input-border);
			background: var(--vscode-editorWidget-background);
			color: var(--vscode-foreground);
			flex: 0 0 auto;
			font-size: 12px;
			line-height: 1.35;
		}

		.qe-caret-docs-banner {
			display: flex;
			align-items: flex-start;
			justify-content: space-between;
			gap: 10px;
			padding: 6px 8px;
			border-bottom: 1px solid var(--vscode-input-border);
			background: var(--vscode-editorWidget-background);
			color: var(--vscode-foreground);
			font-size: 12px;
			line-height: 1.35;
			user-select: none;
			pointer-events: none;
			position: relative;
			flex: 0 0 auto;
			/* Keep the editor layout stable: reserve space for two lines of content. */
			min-height: calc(2 * 1.35em + 12px);
		}

		.qe-caret-docs-text {
			flex: 1 1 auto;
			min-width: 0;
			white-space: normal;
		}

		.qe-caret-docs-text.is-watermark {
			opacity: 0.9;
		}

		.qe-caret-docs-text.is-watermark .qe-caret-docs-watermark-title {
			color: var(--vscode-foreground);
			font-weight: 600;
		}

		.qe-caret-docs-text.is-watermark .qe-caret-docs-watermark-body {
			color: var(--vscode-descriptionForeground);
		}

		.qe-caret-docs-text code {
			font-family: var(--vscode-editor-font-family);
			font-size: 12px;
		}

		.qe-caret-docs-line {
			margin-bottom: 2px;
		}

		.qe-missing-clusters-text {
			flex: 1 1 auto;
			min-width: 0;
		}

		.qe-missing-clusters-actions {
			flex: 0 0 auto;
			display: flex;
			gap: 6px;
		}

		/* Missing clusters button */
		.qe-missing-clusters-btn {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: var(--vscode-button-background);
			border: 1px solid var(--vscode-button-border);
			border-radius: 4px;
			color: var(--vscode-button-foreground);
			cursor: pointer;
			padding: 4px 10px;
			font-size: 12px;
		}
		.qe-missing-clusters-btn:hover {
			background: var(--vscode-button-hoverBackground);
		}

		.query-editor-toolbar-sep {
			width: auto;
			height: auto;
			background: transparent;
			margin: 0 2px;
			opacity: 0.9;
			color: var(--vscode-descriptionForeground);
			user-select: none;
		}

		.query-editor-toolbar-sep::before {
			content: '|';
			display: inline-block;
			line-height: 18px;
			padding: 0 2px;
		}

		.query-editor-toolbar-btn {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 4px;
			background: transparent;
			border: 1px solid transparent;
			border-radius: 4px;
			color: var(--vscode-foreground);
			cursor: pointer;
			padding: 4px 6px;
			height: 28px;
			min-width: 28px;
		}

		.query-editor-toolbar-btn:hover {
			background: var(--vscode-toolbar-hoverBackground, var(--vscode-list-hoverBackground));
			border-color: var(--vscode-toolbar-hoverBackground, var(--vscode-list-hoverBackground));
		}

		.query-editor-toolbar-btn.is-active {
			background: var(--vscode-toolbar-activeBackground, var(--vscode-actionBar-toggledBackground, rgba(128, 128, 128, 0.25)));
			border-color: transparent;
			color: var(--vscode-foreground);
		}

		.query-editor-toolbar-btn.is-active:hover {
			background: var(--vscode-toolbar-activeBackground, var(--vscode-actionBar-toggledBackground, rgba(128, 128, 128, 0.25)));
			border-color: transparent;
		}

		.query-editor-toolbar-btn .qe-icon {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 16px;
			height: 16px;
		}

		.query-editor-toolbar-btn svg {
			display: block;
		}

		.qe-toolbar-menu-wrapper {
			position: relative;
			display: inline-flex;
			align-items: center;
		}

		.query-editor-toolbar-btn.qe-toolbar-dropdown-btn {
			gap: 2px;
			padding-left: 6px;
			padding-right: 4px;
		}

		.query-editor-toolbar-btn.qe-toolbar-dropdown-btn .qe-toolbar-caret {
			color: var(--vscode-descriptionForeground);
			line-height: 1;
			margin-left: 2px;
			pointer-events: none;
			display: inline-flex;
			align-items: center;
		}

		.query-editor-toolbar-btn.qe-toolbar-dropdown-btn .qe-toolbar-caret svg {
			width: 8px;
			height: 8px;
		}

		/* Tools dropdown menu - uses fixed positioning to escape overflow:hidden containers */
		.qe-toolbar-dropdown-menu {
			position: fixed;
			z-index: 1000;
		}

		/* Tools dropdown: icon + text should be vertically centered (not baseline). */
		.qe-toolbar-dropdown-menu .kusto-dropdown-item-main {
			align-items: center;
		}

		.qe-toolbar-dropdown-menu .qe-toolbar-menu-label {
			display: inline-flex;
			align-items: center;
			line-height: 16px;
			margin-left: 5px;
		}

		/* Copilot logo in the query editor toolbar: ensure good contrast in dark themes.
		   - If using the image logo, invert it like the optimize button.
		   - If using the inline SVG fallback, slightly thicken strokes so it doesn't look washed out. */
		.query-editor-toolbar-btn.kusto-copilot-chat-toggle img.copilot-logo {
			width: 16px;
			height: 16px;
			display: block;
		}

		body.vscode-dark .query-editor-toolbar-btn.kusto-copilot-chat-toggle img.copilot-logo,
		body.vscode-high-contrast .query-editor-toolbar-btn.kusto-copilot-chat-toggle img.copilot-logo,
		body.vscode-high-contrast-light .query-editor-toolbar-btn.kusto-copilot-chat-toggle img.copilot-logo {
			filter: invert(1);
		}

		.query-editor-toolbar-btn.kusto-copilot-chat-toggle .copilot-logo-svg {
			width: 16px;
			height: 16px;
			display: block;
			stroke-width: 1.8px;
		}

		/* Ensure Monaco content widgets (our caret docs tooltip) render above editor content. */
		.monaco-editor .contentWidgets {
			z-index: 1000 !important;
		}

		/* Disable monaco-kusto's default command background highlighting.
		   The selectionHighlight class is used by KustoCommandHighlighter to highlight
		   the entire current command, but we use our own gutter indicator instead. */
		.monaco-editor .selectionHighlight {
			background-color: transparent !important;
		}

		/* Active statement indicator (only shown when multiple statements exist).
		   Uses the gutter/line-decoration lane rather than a background highlight. */
		.monaco-editor .margin-view-overlays .kusto-active-statement-gutter {
			box-sizing: border-box;
			/* The line-decorations lane sits between line numbers and content.
			   Draw on the RIGHT edge so it hugs the query text, not the line numbers. */
			/* Avoid `border-style: dotted` since it can render an uneven pattern at some zoom/DPI.
			   Use a fixed repeating pattern so each "dot" is consistent. */
			border-right: none;
			background-image: radial-gradient(
				circle,
				var(--vscode-editorLineNumber-activeForeground, var(--vscode-editorLineNumber-foreground)) 0px,
				var(--vscode-editorLineNumber-activeForeground, var(--vscode-editorLineNumber-foreground)) 1px,
				transparent 1.2px
			);
			background-repeat: repeat-y;
			background-size: 2px 6px;
			background-position: right 0 top 0;
			/* Keep a ~5px gap from the code without widening the gutter. */
			transform: translateX(-15px);
			opacity: 0.85;
		}

		.kusto-doc-widget {
			max-width: 560px;
			padding: 8px 10px;
			border-radius: 6px;
			border: 1px solid var(--vscode-editorHoverWidget-border, var(--vscode-input-border));
			background: var(--vscode-editorHoverWidget-background, var(--vscode-editorWidget-background));
			color: var(--vscode-editorHoverWidget-foreground, var(--vscode-foreground));
			font-size: 12px;
			line-height: 1.35;
			box-shadow: none;
			z-index: 2147483647;
			pointer-events: none;
			user-select: none;
		}

		.kusto-doc-widget-overlay {
			position: fixed;
		}

		.kusto-doc-widget code {
			font-family: var(--vscode-editor-font-family);
			font-size: 12px;
		}

		.query-editor {
			width: 100%;
			flex: 1 1 auto;
			height: auto;
			min-height: 0;
			min-width: 0;
			position: relative;
			overflow: hidden;
			font-family: var(--vscode-editor-font-family);
			font-size: 13px;
		}

		.query-editor-resizer {
			flex: 0 0 12px;
			height: 12px;
			cursor: ns-resize;
			border-top: none;
			background: var(--vscode-editor-background);
			position: relative;
			touch-action: none;
		}

		.query-editor-resizer::after {
			content: '';
			position: absolute;
			left: 50%;
			top: 50%;
			width: 34px;
			height: 4px;
			transform: translate(-50%, -50%);
			border-radius: 2px;
			opacity: 0.55;
			background-image: repeating-linear-gradient(
				0deg,
				var(--vscode-input-placeholderForeground),
				var(--vscode-input-placeholderForeground) 1px,
				transparent 1px,
				transparent 3px
			);
		}

		.query-editor-resizer:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.query-editor-resizer:hover::after {
			opacity: 0.85;
		}

		.query-editor-resizer.is-dragging {
			background: var(--vscode-list-hoverBackground);
		}

		.query-editor-resizer.is-dragging::after {
			opacity: 0.95;
		}

		.query-editor-placeholder {
			position: absolute;
			left: 56px;
			top: 43px;
			right: 10px;
			pointer-events: none;
			user-select: none;
			font-family: var(--vscode-editor-font-family);
			font-size: 13px;
			color: var(--vscode-input-placeholderForeground);
			opacity: 0.9;
		}

		/* Global button styling for our UI.
		   Use background-color (not background shorthand) so we don't wipe button background-image
		   sprites (Toast UI toolbar icons, any icon-buttons, etc.). */
		button {
			background-color: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			border: none;
			padding: 6px 14px;
			cursor: pointer;
			font-size: 13px;
			border-radius: 2px;
		}

		button:active:not(:disabled) {
			opacity: 0.8;
		}

		/* Disabled buttons: match VS Code's disabled feel.
		   Keep this scoped to our primary "Run" button to avoid fighting other component-specific rules. */
		/* LEGACY: .split-button system - migrated to .unified-btn-split. Keeping for backward compatibility. */
		.split-button .split-main:disabled {
			background-color: var(--vscode-button-secondaryBackground);
			color: var(--vscode-disabledForeground);
			cursor: not-allowed;
			opacity: 1;
		}

		.split-button {
			position: relative;
			display: inline-flex;
			align-items: stretch;
		}

		.split-button .split-main {
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
		}

		.split-button .split-toggle {
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;
			padding: 6px 10px;
			min-width: 28px;
			border-left: 1px solid var(--vscode-button-border);
		}

		.split-button .split-menu {
			position: absolute;
			top: calc(100% + 4px);
			left: 0;
			min-width: 220px;
			background: var(--vscode-dropdown-background);
			color: var(--vscode-dropdown-foreground);
			border: 1px solid var(--vscode-dropdown-border);
			border-radius: 2px;
			z-index: 2000;
			display: none;
			box-shadow: 0 2px 8px var(--vscode-widget-shadow);
		}

		.split-button .split-menu-item {
			padding: 8px 10px;
			cursor: pointer;
			font-size: 12px;
			white-space: nowrap;
		}

		.split-button .split-menu-item:hover {
			background: var(--vscode-list-hoverBackground);
		}
		/* END LEGACY .split-button */

		.results {
			background: var(--vscode-editor-background);
			border: none;
			border-top: 1px solid var(--vscode-panel-border);
			padding: 8px 0;
			margin-top: 6px;
			border-radius: 0;
			display: none;
			max-width: 100%;
		}

		.results.visible {
			display: flex;
			flex-direction: column;
			flex: 1 1 auto;
			min-height: 0;
			min-width: 0;
			overflow: hidden;
		}

		/* Constrain the results body so the table container can scroll inside it.
		   This is required anywhere the reusable tabular control is embedded, not just
		   inside .results-wrapper. */
		.results-body {
			flex: 1 1 auto;
			min-height: 0;
			display: flex;
			flex-direction: column;
			overflow: hidden;
		}

		.results-body > .data-search,
		.results-body > .column-search {
			flex: 0 0 auto;
		}

		.results-body > .table-container {
			flex: 1 1 auto;
			min-height: 0;
		}

		/* Query results inside our resizable wrapper use flex layout and the wrapper owns the separator line. */
		.results-wrapper .results,
		.results-wrapper .results.visible {
			display: flex;
			flex-direction: column;
			min-height: 0;
			min-width: 0;
			overflow: hidden;
			background: transparent;
			border-top: none;
			margin-top: 0;
			padding: 8px 0 0;
		}

		/* Constrain the results body so the table container can scroll inside it. */
		.results-wrapper .results-body {
			flex: 1 1 auto;
			min-height: 0;
			display: flex;
			flex-direction: column;
		}

		.results-wrapper .results-body > .data-search,
		.results-wrapper .results-body > .column-search {
			flex: 0 0 auto;
		}

		.results-wrapper .results-body > .table-container {
			flex: 1 1 auto;
			min-height: 0;
		}

		.results-header {
			font-size: 12px;
			color: var(--vscode-descriptionForeground);
			margin-bottom: 6px;
			padding-bottom: 0;
			border-bottom: none;
			display: flex;
			justify-content: space-between;
			align-items: center;
			flex-wrap: wrap;
			gap: 8px;
		}

		/* Add a bit of space under the error UX so it doesn't visually collide with the bottom edge/handle. */
		.results-header.kusto-error-ux {
			margin-bottom: 10px;
		}

		.results-title-row {
			display: inline-flex;
			align-items: center;
			gap: 4px;
			flex-wrap: wrap;
			min-width: 0;
		}

		.results-tools-row {
			display: inline-flex;
			align-items: center;
			justify-content: flex-end;
			gap: 4px;
			flex-wrap: wrap;
			margin-left: auto;
		}

		.results-sep {
			display: inline-block;
			width: 0;
			height: 18px;
			border-left: 1px solid var(--vscode-panel-border);
			margin: 0 4px;
			opacity: 0.9;
		}

		/* Clickable error locations (line/column) */
		.kusto-error-location {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			padding: 2px 8px;
			border-radius: 999px;
			background: var(--vscode-badge-background);
			color: var(--vscode-badge-foreground);
			border: 1px solid var(--vscode-button-border);
			text-decoration: none;
			font-family: var(--vscode-editor-font-family);
			font-size: 12px;
			line-height: 18px;
			cursor: pointer;
			user-select: none;
		}

		.kusto-error-location:hover {
			outline: 1px solid var(--vscode-focusBorder);
			outline-offset: 1px;
		}

		.kusto-error-location:focus-visible {
			outline: 2px solid var(--vscode-focusBorder);
			outline-offset: 2px;
		}

		.results-visibility-toggle {
			margin-left: 6px;
		}

		.results-tools {
			display: flex;
			gap: 4px;
		}

		.tool-toggle-btn {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			border: 1px solid transparent;
			border-radius: 2px;
			color: var(--vscode-foreground);
			cursor: pointer;
			padding: 4px 8px;
			font-size: 14px;
		}

		.tool-toggle-btn:hover {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.tool-toggle-btn.is-active {
			background: var(--vscode-list-activeSelectionBackground);
			color: var(--vscode-list-activeSelectionForeground);
		}

		/* Keep .active for backwards compatibility */
		.tool-toggle-btn.active {
			background: var(--vscode-list-activeSelectionBackground);
			color: var(--vscode-list-activeSelectionForeground);
		}

		.tool-toggle-btn.active:hover,
		.tool-toggle-btn.is-active:hover {
			background: var(--vscode-list-activeSelectionBackground);
		}

		/* Results show/hide toggle: icon-button style */
		.tool-toggle-btn.results-visibility-toggle {
			background: transparent;
			border: 1px solid transparent;
			padding: 0;
			width: 28px;
			height: 28px;
		}

		.tool-toggle-btn.results-visibility-toggle:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.tool-toggle-btn.results-visibility-toggle.is-active,
		.tool-toggle-btn.results-visibility-toggle.active {
			background: var(--vscode-list-activeSelectionBackground);
			color: var(--vscode-list-activeSelectionForeground);
		}

		.tool-toggle-btn.results-visibility-toggle.is-active:hover,
		.tool-toggle-btn.results-visibility-toggle.active:hover {
			background: var(--vscode-list-activeSelectionBackground);
		}

		.kusto-split-btn {
			display: inline-flex;
			align-items: stretch;
		}

		.kusto-split-btn > .tool-toggle-btn {
			border-radius: 0;
		}

		.kusto-split-btn > .tool-toggle-btn:first-child {
			border-top-left-radius: 2px;
			border-bottom-left-radius: 2px;
		}

		.kusto-split-btn.kusto-split-single > .tool-toggle-btn:first-child {
			border-top-right-radius: 2px;
			border-bottom-right-radius: 2px;
		}

		.kusto-split-btn > .tool-toggle-btn:last-child {
			border-top-right-radius: 2px;
			border-bottom-right-radius: 2px;
			border-left: none;
			padding-left: 6px;
			padding-right: 6px;
			min-width: 22px;
			font-size: 12px;
		}

		.kusto-split-menu {
			background: var(--vscode-editor-background);
			color: var(--vscode-foreground);
			border: 1px solid var(--vscode-panel-border);
			border-radius: 2px;
			padding: 4px;
			display: inline-block;
			width: max-content;
			max-width: calc(100vw - 16px);
		}

		.kusto-split-menu-item {
			display: block;
			width: auto;
			text-align: left;
			background: transparent;
			color: inherit;
			border: 1px solid transparent;
			border-radius: 2px;
			padding: 6px 8px;
			cursor: pointer;
			font-size: 12px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.kusto-split-menu-item:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.kusto-split-menu-item:focus-visible {
			outline: 2px solid var(--vscode-focusBorder);
			outline-offset: 1px;
		}

		.data-search {
			display: flex;
			gap: 4px;
			align-items: center;
			min-width: 300px;
			margin-bottom: 6px;
			padding: 6px;
			background: var(--vscode-editor-background);
			border: 1px solid var(--vscode-panel-border);
			border-radius: 2px;
			position: relative;
			/* Keep tool UI above sticky table headers/first column (see th.row-selector z-index: 100). */
			z-index: 2000;
		}

		.data-search input {
			flex: 1;
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			padding: 4px 8px;
			font-size: 12px;
			border-radius: 2px;
		}

		.data-search input:focus {
			outline: none;
			border-color: var(--vscode-focusBorder);
		}

		.data-search-nav {
			display: flex;
			gap: 2px;
		}

		.data-search-nav button {
			padding: 2px 8px;
			font-size: 11px;
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid var(--vscode-button-border);
			border-radius: 2px;
			cursor: pointer;
		}

		.data-search-nav button:hover:not(:disabled) {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.data-search-nav button:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		.data-search-info {
			font-size: 11px;
			color: var(--vscode-descriptionForeground);
			white-space: nowrap;
		}

		.column-search {
			position: relative;
			/* Keep tool UI above sticky table headers/first column (see th.row-selector z-index: 100). */
			z-index: 2000;
			min-width: 200px;
			margin-bottom: 8px;
			padding: 8px;
			background: var(--vscode-editor-background);
			border: 1px solid var(--vscode-panel-border);
			border-radius: 2px;
		}

		.column-search input {
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			padding: 4px 8px;
			font-size: 12px;
			border-radius: 2px;
			width: 100%;
		}

		.column-search input:focus {
			outline: none;
			border-color: var(--vscode-focusBorder);
		}

		.column-autocomplete {
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			max-height: 200px;
			overflow-y: auto;
			background: var(--vscode-dropdown-background);
			border: 1px solid var(--vscode-dropdown-border);
			border-top: none;
			border-radius: 0 0 4px 4px;
			/* Above the tool container, and above sticky table cells. */
			z-index: 2001;
			display: none;
		}

		.column-autocomplete.visible {
			display: block;
		}

		.column-autocomplete-item {
			padding: 6px 8px;
			cursor: pointer;
			font-size: 12px;
		}

		.column-autocomplete-item:hover,
		.column-autocomplete-item.selected {
			background: var(--vscode-list-hoverBackground);
		}

		.table-container {
			overflow: auto;
			max-width: 100%;
			max-height: none;
			min-height: 0;
			position: relative;
			border: 1px solid var(--vscode-panel-border);
			border-radius: 2px;
			margin-top: 5px;
		}

		.table-container:focus {
			outline: 1px solid var(--vscode-focusBorder);
		}

		/* URL CSV previews: avoid nested scrollbars (outer .url-output should scroll). */
		.url-table-container {
			overflow: visible;
			max-width: none;
			max-height: none;
			border: none;
			border-radius: 0;
		}

		/* (Removed URL/CSV-specific layout rules.)
		   The reusable tabular control now defines a scrollable layout everywhere it is used. */

		table {
			width: max-content;
			min-width: 100%;
			border-collapse: collapse;
			font-size: 12px;
			user-select: none;
		}

		th, td {
			text-align: left;
			padding: 6px 8px;
			border-right: 1px solid var(--vscode-panel-border);
			border-bottom: 1px solid var(--vscode-panel-border);
			white-space: nowrap;
			position: relative;
			max-width: 75ch;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		td {
			background: var(--vscode-editor-background);
		}

		th {
			font-weight: 600;
			background: var(--vscode-list-hoverBackground);
			position: sticky;
			top: 0;
			z-index: 2;
		}

		th:not(.row-selector) {
			/* Intentionally do not override `th { position: sticky; }`.
			   This keeps all headers (including non-# columns) consistent while scrolling. */
			--kusto-noop: 0;
		}

		.column-header-content {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 4px;
		}

		.column-header-left {
			display: flex;
			align-items: center;
			gap: 6px;
			min-width: 0;
		}

		.column-name {
			min-width: 0;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		.kusto-sort-indicator {
			font-size: 11px;
			opacity: 0.85;
			line-height: 1;
			user-select: none;
		}

		.kusto-filter-link-host {
			margin-left: 6px;
			min-width: 0;
		}

		.kusto-filtered-link {
			color: var(--vscode-textLink-foreground);
			text-decoration: none;
			font-size: 11px;
			opacity: 0.95;
		}

		.kusto-filtered-link:hover {
			text-decoration: underline;
		}

		.kusto-filtered-link:active {
			color: var(--vscode-textLink-activeForeground);
		}

		.kusto-sort-priority {
			margin-left: 2px;
			font-size: 10px;
			opacity: 0.9;
		}

		.kusto-sort-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.6);
			z-index: 10000;
			align-items: center;
			justify-content: center;
		}

		.kusto-sort-modal.visible {
			display: flex;
		}

		.kusto-sort-dialog {
			background: var(--vscode-editor-background);
			border: 1px solid var(--vscode-panel-border);
			border-radius: 4px;
			width: 520px;
			max-width: calc(100% - 24px);
			max-height: 80%;
			display: flex;
			flex-direction: column;
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
		}

		.kusto-sort-header {
			padding: 10px 12px;
			border-bottom: 1px solid var(--vscode-panel-border);
			display: flex;
			align-items: center;
			justify-content: flex-start;
			gap: 8px;
		}

		.kusto-sort-close {
			padding: 0;
			width: 28px;
			height: 28px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			border: 1px solid transparent;
			border-radius: 2px;
			color: var(--vscode-errorForeground);
			cursor: pointer;
		}

		.kusto-sort-close:hover {
			background: var(--vscode-button-secondaryHoverBackground);
			border-color: var(--vscode-input-border);
		}

		.kusto-sort-close svg {
			display: block;
		}

		.kusto-sort-body {
			padding: 10px 12px;
			overflow: auto;
		}

		.kusto-sort-empty {
			color: var(--vscode-descriptionForeground);
			font-size: 12px;
			padding: 6px 2px;
		}

		.kusto-sort-row {
			display: grid;
			grid-template-columns: 24px 28px 26px 1fr 140px;
			gap: 8px;
			align-items: center;
			padding: 6px 4px;
			border-radius: 4px;
		}

		.kusto-sort-row:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.kusto-sort-row.kusto-sort-drop {
			outline: 1px dashed var(--vscode-focusBorder);
			outline-offset: 1px;
		}

		.kusto-sort-row.kusto-sort-dragging {
			opacity: 0.6;
		}

		.kusto-sort-grab {
			background: transparent;
			border: 1px solid transparent;
			color: var(--vscode-descriptionForeground);
			border-radius: 4px;
			width: 24px;
			height: 28px;
			padding: 0;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			cursor: grab;
			font-size: 14px;
			line-height: 1;
			letter-spacing: -2px;
			user-select: none;
		}

		.kusto-sort-grab:hover {
			background: var(--vscode-editor-background);
			border-color: var(--vscode-input-border);
			color: var(--vscode-foreground);
		}

		.kusto-sort-grab:active {
			cursor: grabbing;
		}

		.kusto-sort-order {
			text-align: right;
			font-size: 11px;
			color: var(--vscode-descriptionForeground);
		}

		.kusto-sort-col,
		.kusto-sort-dir {
			background: var(--vscode-dropdown-background);
			color: var(--vscode-dropdown-foreground);
			border: 1px solid var(--vscode-dropdown-border);
			border-radius: 2px;
			padding: 4px 6px;
			font-size: 12px;
		}

		.kusto-sort-remove,
		.kusto-sort-btn {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid var(--vscode-button-border);
			border-radius: 2px;
			padding: 4px 8px;
			cursor: pointer;
			font-size: 12px;
		}

		.kusto-sort-remove {
			padding: 0;
			width: 28px;
			height: 28px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			background: transparent;
			border-color: transparent;
			color: var(--vscode-errorForeground);
		}

		.kusto-sort-remove:hover,
		.kusto-sort-btn:hover {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.kusto-sort-remove:hover {
			border-color: var(--vscode-input-border);
		}

		.kusto-sort-remove svg {
			display: block;
		}

		.kusto-sort-add-row {
			display: grid;
			grid-template-columns: 1fr 1fr 140px 32px;
			gap: 8px;
			align-items: center;
			padding: 8px 4px 4px 4px;
			border-top: 1px solid var(--vscode-panel-border);
			margin-top: 6px;
		}

		.kusto-sort-add-label {
			font-size: 11px;
			color: var(--vscode-descriptionForeground);
		}

		.kusto-sort-add-btn {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid var(--vscode-button-border);
			border-radius: 4px;
			width: 32px;
			height: 28px;
			cursor: pointer;
			font-size: 16px;
			line-height: 1;
			padding: 0;
		}

		.kusto-sort-add-btn:hover {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.kusto-sort-footer {
			display: none;
		}

		.column-menu-btn {
			padding: 2px 6px;
			height: 18px;
			background: var(--vscode-button-secondaryBackground);
			border: 1px solid transparent;
			color: var(--vscode-button-secondaryForeground);
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 11px;
			font-weight: normal;
			border-radius: 3px;
			opacity: 0.7;
		}

		.column-menu-btn:hover {
			opacity: 1;
			background: var(--vscode-button-secondaryHoverBackground);
			border-color: var(--vscode-button-border);
		}

		.column-menu {
			position: fixed;
			background: var(--vscode-dropdown-background);
			border: 1px solid var(--vscode-dropdown-border);
			border-radius: 4px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
			z-index: 10000;
			min-width: 200px;
			display: none;
		}

		.column-menu.visible {
			display: block;
		}

		.column-menu-item {
			padding: 8px 12px;
			cursor: pointer;
			font-size: 12px;
			border-bottom: 1px solid var(--vscode-panel-border);
		}

		.column-menu-item:last-child {
			border-bottom: none;
		}

		.column-menu-item:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.kusto-filter-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.6);
			z-index: 10002;
			align-items: center;
			justify-content: center;
		}

		.kusto-filter-modal.visible {
			display: flex;
		}

		.kusto-filter-dialog {
			background: var(--vscode-editor-background);
			border: 1px solid var(--vscode-panel-border);
			border-radius: 6px;
			width: 760px;
			max-width: calc(100% - 24px);
			height: 490px;
			max-height: 85vh;
			overflow: hidden;
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
			display: flex;
			flex-direction: column;
		}

		.kusto-filter-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 10px 10px 8px 10px;
			border-bottom: 1px solid var(--vscode-panel-border);
		}

		.kusto-filter-title {
			font-size: 12px;
			font-weight: 600;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			padding-right: 8px;
		}

		.kusto-filter-close {
			background: transparent;
			border: 1px solid transparent;
			color: var(--vscode-foreground);
			cursor: pointer;
			width: 24px;
			height: 24px;
			border-radius: 4px;
			font-size: 16px;
			line-height: 1;
		}

		.kusto-filter-close-btn {
			min-width: 28px;
			width: 28px;
			height: 28px;
			margin: 0;
		}

		.kusto-filter-modes {
			display: flex;
			gap: 0;
			padding: 8px 10px;
			border-bottom: 1px solid var(--vscode-panel-border);
			align-items: center;
			justify-content: flex-start;
		}

		.kusto-filter-modes-bar {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 10px;
			padding-right: 10px;
			border-bottom: 1px solid var(--vscode-panel-border);
		}

		.kusto-filter-modes-bar .kusto-filter-modes {
			padding-right: 0;
			border-bottom: none;
		}

		.kusto-filter-rules-combine {
			display: inline-flex;
			align-items: center;
			gap: 8px;
			flex: 0 0 auto;
			min-height: 28px;
		}

		.kusto-filter-rules-combine-label {
			font-size: 12px;
			opacity: 0.9;
			user-select: none;
		}

		.kusto-filter-pill-toggle {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid var(--vscode-button-border);
			border-radius: 999px;
			padding: 4px 10px;
			font-size: 12px;
			cursor: pointer;
			opacity: 0.9;
			min-width: 52px;
			text-align: center;
		}

		.kusto-filter-pill-toggle:hover {
			opacity: 1;
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.kusto-filter-pill-toggle.on {
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			border-color: var(--vscode-button-border);
		}

		.kusto-filter-pill-toggle.on:hover {
			background: var(--vscode-button-hoverBackground);
		}

		.kusto-filter-mode-btn {
			flex: 0 0 auto;
			min-width: 120px;
			color: var(--vscode-button-secondaryForeground);
			background-color: transparent;
			border: 0px;
			border-radius: 0;
			padding: 6px 8px;
			font-size: 12px;
			cursor: pointer;
			opacity: 0.85;
		}

		.kusto-filter-mode-btn:first-child {
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;
		}

		.kusto-filter-mode-btn:last-child {
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
			border-left: none;
		}

		.kusto-filter-mode-btn:hover {
			opacity: 1;
			background: var(--vscode-button-secondaryHoverBackground);
			border-color: var(--vscode-button-border);
		}

		.kusto-filter-mode-btn.active {
			opacity: 1;
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
		}

		.kusto-filter-body {
			padding: 10px;
			flex: 1;
			overflow: auto;
			max-height: none;
		}

		.kusto-filter-section {
			display: flex;
			gap: 10px;
			flex-wrap: wrap;
			margin-bottom: 10px;
		}

		.kusto-filter-rules-toolbar {
			align-items: center;
			justify-content: flex-start;
		}

		.kusto-filter-rules-join {
			display: inline-flex;
			align-items: center;
			gap: 8px;
			flex-wrap: nowrap;
		}

		.kusto-filter-rules-join-label {
			font-size: 12px;
			opacity: 0.9;
			user-select: none;
			white-space: nowrap;
		}

		.kusto-filter-seg {
			display: inline-flex;
			align-items: stretch;
			border: 1px solid var(--vscode-button-border);
			border-radius: 999px;
			overflow: hidden;
		}

		.kusto-filter-seg-btn {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: none;
			padding: 4px 10px;
			font-size: 12px;
			cursor: pointer;
			opacity: 0.9;
		}

		.kusto-filter-seg-btn:hover {
			opacity: 1;
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.kusto-filter-seg-btn.active {
			opacity: 1;
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
		}

		.kusto-filter-inline {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			font-size: 12px;
			user-select: none;
		}

		.kusto-filter-search {
			width: 100%;
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 0;
			padding: 6px 8px;
			font-size: 12px;
		}

		.kusto-filter-values-toolbar {
			flex-direction: column;
			align-items: stretch;
			gap: 8px;
		}

		.kusto-filter-searchbox {
			position: relative;
			display: block;
		}

		.kusto-filter-search-icon {
			position: absolute;
			left: 8px;
			top: 50%;
			transform: translateY(-50%);
			opacity: 0.7;
			pointer-events: none;
			display: inline-flex;
			align-items: center;
			justify-content: center;
		}

		.kusto-filter-search-icon svg {
			display: block;
			width: 14px;
			height: 14px;
		}

		.kusto-filter-search-with-icon {
			padding-left: 28px;
		}

		.kusto-filter-values-actions-row {
			display: flex;
			gap: 8px;
			flex-wrap: wrap;
			align-items: center;
		}

		.kusto-filter-values-search {
			flex: 1;
			min-width: 50px;
		}

		.kusto-filter-mini-btn {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid transparent;
			border-radius: 6px;
			padding: 6px 10px;
			font-size: 12px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			gap: 6px;
			opacity: 0.85;
			white-space: nowrap;
		}

		.kusto-filter-mini-btn:hover {
			opacity: 1;
			background: var(--vscode-button-secondaryHoverBackground);
			border-color: var(--vscode-button-border);
		}

		.kusto-filter-mini-btn-icon {
			display: inline-flex;
		}

		.kusto-filter-values {
			display: flex;
			flex-direction: column;
			gap: 4px;
			max-height: 220px;
			overflow: auto;
		}

		.kusto-filter-values-columns {
			display: grid;
			grid-template-columns: 16px 1fr auto;
			align-items: center;
			gap: 8px;
			padding: 0 6px;
			font-size: 11px;
			font-weight: bold;
			opacity: 0.85;
			user-select: none;
			margin-bottom: 5px;
			margin-top:20px;
		}

		.kusto-filter-values-columns-count {
			text-align: right;
			padding-left: 8px;
		}

		.kusto-filter-value {
			display: grid;
			grid-template-columns: 16px 1fr auto;
			align-items: center;
			gap: 8px;
			padding: 4px 6px;
			border-radius: 4px;
			cursor: pointer;
			font-size: 12px;
			user-select: none;
		}

		.kusto-filter-value:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.kusto-filter-value-text {
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		.kusto-filter-value-count {
			font-size: 11px;
			opacity: 0.75;
			padding-left: 8px;
		}

		.kusto-filter-note {
			font-size: 11px;
			opacity: 0.8;
			margin-top: 6px;
		}

		.kusto-filter-rule select,
		.kusto-filter-rule input {
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 4px;
			padding: 6px 8px;
			font-size: 12px;
		}

		.kusto-filter-rules {
			display: flex;
			flex-direction: column;
			gap: 8px;
			width: 100%;
		}

		.kusto-filter-rule-row {
			display: flex;
			gap: 8px;
			align-items: center;
			width: 100%;
		}

		.kusto-filter-rule-row select,
		.kusto-filter-rule-row input {
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 4px;
			padding: 6px 8px;
			font-size: 12px;
		}

		.kusto-filter-rule-op {
			min-width: 210px;
		}

		.kusto-filter-rule-inputs {
			display: flex;
			gap: 8px;
			flex: 1;
			align-items: center;
			flex-wrap: wrap;
		}

		.kusto-filter-rule-last {
			display: inline-flex;
			gap: 8px;
			align-items: center;
		}

		.kusto-filter-rule-del,
		.kusto-filter-rule-del-spacer {
			width: 28px;
			min-width: 28px;
			height: 28px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
		}

		.kusto-filter-rule-del {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid transparent;
			border-radius: 4px;
			cursor: pointer;
			padding: 0;
			opacity: 0.85;
		}

		.kusto-filter-rule-del:hover {
			opacity: 1;
			background: var(--vscode-button-secondaryHoverBackground);
			border-color: var(--vscode-button-border);
		}

		.kusto-filter-rule {
			display: flex;
			flex-direction: column;
			gap: 8px;
			width: 100%;
		}

		.kusto-filter-rule-inputs {
			display: flex;
			gap: 8px;
			flex-wrap: wrap;
		}

		.kusto-filter-last {
			display: flex;
			gap: 8px;
			align-items: center;
		}

		.kusto-filter-footer {
			display: flex;
			gap: 8px;
			padding: 10px;
			border-top: 1px solid var(--vscode-panel-border);
			justify-content: flex-end;
		}

		.kusto-filter-btn {
			flex: 0 0 auto;
			min-width: 115px;
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid transparent;
			border-radius: 4px;
			padding: 6px 10px;
			font-size: 12px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 6px;
		}

		.kusto-filter-btn-icon {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			line-height: 0;
		}

		.kusto-filter-btn-icon svg {
			display: block;
		}

		.kusto-filter-btn:hover {
			background: var(--vscode-button-hoverBackground);
			color: var(--vscode-button-foreground);
		}

		.kusto-filter-btn.secondary {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
		}

		.kusto-filter-btn.secondary:hover {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.kusto-filter-btn.danger {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid transparent;
		}

		.kusto-filter-btn.danger:hover {
			background: var(--vscode-inputValidation-errorBackground);
			color: var(--vscode-inputValidation-errorForeground);
			border-color: var(--vscode-inputValidation-errorBorder);
			opacity: 0.95;
		}

		.column-analysis-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.6);
			z-index: 10000;
			align-items: center;
			justify-content: center;
		}

		.column-analysis-modal.visible {
			display: flex;
		}

		.column-analysis-content {
			background: var(--vscode-editor-background);
			border: 1px solid var(--vscode-panel-border);
			border-radius: 4px;
			width: 60%;
			max-width: 800px;
			max-height: 80%;
			display: flex;
			flex-direction: column;
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
		}

		.column-analysis-header {
			padding: 12px 16px;
			border-bottom: 1px solid var(--vscode-panel-border);
			display: flex;
			justify-content: space-between;
			align-items: center;
			background: var(--vscode-editorGroupHeader-tabsBackground);
		}

		.column-analysis-header h3 {
			margin: 0;
			font-size: 14px;
			font-weight: 600;
		}

		.column-analysis-close {
			/* Reuse the shared icon-button styling (see .refresh-btn). */
			background: transparent;
		}

		.column-analysis-close:hover {
			background: var(--vscode-list-hoverBackground);
		}

		.column-analysis-body {
			flex: 1;
			overflow: auto;
			padding: 16px;
		}

		.column-analysis-table {
			width: 100%;
			border-collapse: collapse;
			font-size: 12px;
		}

		.column-analysis-table th,
		.column-analysis-table td {
			text-align: left;
			padding: 8px 12px;
			border-bottom: 1px solid var(--vscode-panel-border);
		}

		.column-analysis-table th {
			font-weight: 600;
			background: var(--vscode-list-hoverBackground);
		}

		.column-analysis-table .total-row {
			border-top: 2px solid var(--vscode-panel-border);
			background: var(--vscode-list-hoverBackground);
		}

		.column-analysis-table .total-row td {
			font-weight: 600;
		}

		.column-picker {
			margin-bottom: 16px;
		}

		.column-picker label {
			display: block;
			margin-bottom: 4px;
			font-weight: 600;
			font-size: 12px;
		}

		.column-picker select {
			width: 100%;
			padding: 4px 8px;
			background: var(--vscode-dropdown-background);
			color: var(--vscode-dropdown-foreground);
			border: 1px solid var(--vscode-dropdown-border);
			border-radius: 2px;
		}

		.row-selector {
			width: 40px;
			min-width: 40px;
			max-width: 40px;
			text-align: center;
			background: var(--vscode-editor-background);
			cursor: pointer;
			position: sticky;
			left: 0;
			z-index: 10;
			user-select: none;
			border-left: 1px solid var(--vscode-panel-border);
			border-right: 2px solid var(--vscode-panel-border);
		}

		th.row-selector {
			z-index: 100;
			background: var(--vscode-list-hoverBackground);
		}

		td.selected-cell {
			background: var(--vscode-list-activeSelectionBackground);
			color: var(--vscode-list-activeSelectionForeground);
		}

		td.selected-cell-focus {
			outline: 2px solid var(--vscode-focusBorder);
			outline-offset: -2px;
		}

		.kusto-context-menu {
			position: absolute;
			z-index: 100000;
			background: var(--vscode-menu-background);
			color: var(--vscode-menu-foreground);
			border: 1px solid var(--vscode-menu-border, var(--vscode-panel-border));
			border-radius: 4px;
			padding: 4px;
			min-width: 120px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
		}

		.kusto-context-menu-item {
			width: 100%;
			display: block;
			text-align: left;
			background: transparent;
			color: inherit;
			border: none;
			padding: 6px 10px;
			font: inherit;
			cursor: pointer;
		}

		.kusto-context-menu-item:hover {
			background: var(--vscode-menu-selectionBackground);
			color: var(--vscode-menu-selectionForeground);
		}

		td.search-match {
			background: var(--vscode-editor-findMatchBackground);
			outline: 1px solid var(--vscode-editor-findMatchBorder);
		}

		td.search-match-current {
			background: var(--vscode-editor-findMatchHighlightBackground);
			outline: 2px solid var(--vscode-editor-findMatchHighlightBorder);
			outline-offset: -2px;
		}

		.object-view-btn {
			margin-left: 0;
			margin-top: 0;
			margin-right: 0;
			margin-bottom: 0;
			padding: 2px 6px;
			font-size: 11px;
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid var(--vscode-button-border);
			border-radius: 3px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			vertical-align: baseline;
		}

		.object-view-btn:hover {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.object-viewer-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.6);
			z-index: 10000;
			align-items: center;
			justify-content: center;
		}

		.object-viewer-modal.visible {
			display: flex;
		}

		.object-viewer-content {
			background: var(--vscode-editor-background);
			border: 1px solid var(--vscode-panel-border);
			border-radius: 4px;
			width: 80%;
			max-width: 1200px;
			height: 80%;
			display: flex;
			flex-direction: column;
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
		}

		.object-viewer-header {
			padding: 12px 16px;
			border-bottom: 1px solid var(--vscode-panel-border);
			display: flex;
			justify-content: space-between;
			align-items: center;
			background: var(--vscode-editorGroupHeader-tabsBackground);
		}

		.object-viewer-header h3 {
			margin: 0;
			font-size: 14px;
			font-weight: 600;
		}

		.object-viewer-search {
			display: flex;
			gap: 8px;
			align-items: center;
			flex: 1;
			margin: 0 16px;
		}

		.object-viewer-search input {
			flex: 1;
			max-width: 300px;
			padding: 4px 8px;
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 2px;
		}

		.object-viewer-search-results {
			font-size: 11px;
			color: var(--vscode-descriptionForeground);
		}

		.object-viewer-close {
			/* Reuse shared icon-button styling (.refresh-btn). */
			--kusto-noop: 0;
		}

		.object-viewer-body {
			flex: 1;
			overflow: auto;
			padding: 16px;
		}

		.diff-view-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.6);
			z-index: 10000;
			align-items: center;
			justify-content: center;
		}

		.diff-view-modal.visible {
			display: flex;
		}

		.diff-view-content {
			background: var(--vscode-editor-background);
			border: 1px solid var(--vscode-panel-border);
			border-radius: 4px;
			width: 92%;
			max-width: 1400px;
			height: auto;
			max-height: 86vh;
			display: flex;
			flex-direction: column;
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
		}

		.diff-view-header {
			padding: 10px 12px;
			border-bottom: 1px solid var(--vscode-panel-border);
			display: flex;
			gap: 12px;
			align-items: center;
			background: var(--vscode-editorGroupHeader-tabsBackground);
		}

		/* Push the close button to the far right of the header. */
		.diff-view-header .diff-view-close {
			margin-left: auto;
		}

		.diff-view-header h3 {
			margin: 0;
			font-size: 13px;
			font-weight: 600;
			white-space: nowrap;
		}

		.diff-view-controls {
			flex: 1;
			display: flex;
			gap: 12px;
			flex-wrap: wrap;
			align-items: center;
			min-width: 0;
		}

		.diff-view-toggle {
			display: inline-flex;
			gap: 6px;
			align-items: center;
			font-size: 12px;
			color: var(--vscode-foreground);
			user-select: none;
		}

		.diff-view-body {
			flex: 0 1 auto;
			overflow: auto;
			padding: 10px;
			min-height: 0;
		}

		.diff-empty {
			padding: 14px;
			color: var(--vscode-descriptionForeground);
			border: 1px solid var(--vscode-input-border);
			background: var(--vscode-editorWidget-background);
			border-radius: 4px;
			margin-bottom: 10px;
		}

		.diff-table-wrap {
			overflow: auto;
			border: 1px solid var(--vscode-input-border);
			background: var(--vscode-editor-background);
		}

		.diff-table {
			border-collapse: collapse;
			width: 100%;
			font-size: 12px;
		}

		.diff-table th,
		.diff-table td {
			border: 1px solid var(--vscode-input-border);
			vertical-align: top;
			padding: 6px 8px;
		}

		.diff-table thead th {
			position: sticky;
			top: 0;
			z-index: 2;
			background: var(--vscode-editorGroupHeader-tabsBackground);
		}

		.diff-corner {
			position: sticky;
			left: 0;
			z-index: 3;
			background: var(--vscode-editorGroupHeader-tabsBackground);
			min-width: 140px;
		}

		.diff-row-label {
			position: sticky;
			left: 0;
			z-index: 1;
			background: var(--vscode-editor-background);
			font-weight: 600;
			white-space: nowrap;
		}

		.diff-col-label {
			font-weight: 600;
		}

		.diff-col-names {
			display: flex;
			gap: 10px;
			margin-top: 2px;
			font-size: 11px;
			color: var(--vscode-descriptionForeground);
			flex-wrap: wrap;
		}

		.diff-cell {
			white-space: pre-wrap;
			word-break: break-word;
			min-width: 120px;
		}

		.diff-cell-empty {
			background: var(--vscode-editor-background);
		}

		.diff-cell-match {
			color: var(--vscode-descriptionForeground);
			background: var(--vscode-editor-background);
		}

		.diff-cell-diff {
			background: var(--vscode-editor-findMatchHighlightBackground);
			outline: 1px solid var(--vscode-editor-findMatchHighlightBorder);
			outline-offset: -1px;
		}

		.diff-cell-line {
			display: flex;
			gap: 6px;
			align-items: baseline;
		}

		.diff-cell-tag {
			flex: 0 0 auto;
			font-weight: 600;
		}

		.diff-cell-val {
			flex: 1 1 auto;
			min-width: 0;
		}

		.diff-section {
			margin-bottom: 14px;
		}

		/* Section headers removed by design. */

		.diff-results-host {
			min-height: 0;
		}

		.diff-join-controls {
			display: flex;
			gap: 10px;
			align-items: center;
			flex-wrap: wrap;
			margin-bottom: 8px;
		}

		.diff-join-select {
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 4px;
			padding: 4px 6px;
			font-size: 12px;
		}

		.object-viewer-section {
			border: 1px solid var(--vscode-panel-border);
			border-radius: 4px;
			background: var(--vscode-editor-background);
			margin-bottom: 12px;
		}

		.object-viewer-section-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 8px;
			padding: 10px 12px;
			border-bottom: 1px solid var(--vscode-panel-border);
			background: var(--vscode-editorGroupHeader-tabsBackground);
		}

		.object-viewer-props-section .object-viewer-section-header {
			justify-content: flex-start;
		}

		.object-viewer-props-section .object-viewer-section-title {
			flex: 1;
		}

		.object-viewer-section-title {
			font-size: 12px;
			font-weight: 600;
			min-width: 0;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		.object-viewer-back-btn {
			padding: 4px 8px;
			min-width: 28px;
			height: 28px;
			background: var(--vscode-button-background);
			color: var(--vscode-button-foreground);
			border-color: var(--vscode-button-border);
		}

		.object-viewer-back-btn:hover {
			background: var(--vscode-button-hoverBackground);
		}

		.object-viewer-props-section .object-viewer-section-title {
			white-space: normal;
			overflow: visible;
			text-overflow: clip;
		}

		.object-viewer-crumb {
			background: transparent;
			border: none;
			padding: 0;
			margin: 0;
			font: inherit;
			color: var(--vscode-textLink-foreground);
			cursor: pointer;
			text-decoration: none;
		}

		.object-viewer-crumb:hover {
			background: transparent;
			text-decoration: underline;
		}

		.object-viewer-crumb:focus {
			outline: none;
			background: transparent;
		}

		.object-viewer-crumb:focus-visible {
			outline: 1px solid var(--vscode-focusBorder);
			outline-offset: 2px;
			background: transparent;
		}

		.object-viewer-crumb:disabled {
			color: var(--vscode-foreground);
			cursor: default;
			text-decoration: none;
			opacity: 0.9;
		}

		.object-viewer-crumb-sep {
			color: var(--vscode-descriptionForeground);
			padding: 0 6px;
			user-select: none;
		}

		.object-viewer-props-table {
			width: 100%;
			border-collapse: collapse;
			font-size: 12px;
			font-family: var(--vscode-font-family);
			user-select: text;
		}

		.object-viewer-props-table td {
			padding: 6px 10px;
			border-top: 1px solid var(--vscode-panel-border);
			vertical-align: top;
			word-break: break-word;
			user-select: text;
		}

		.object-viewer-prop-key-cell {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 8px;
			min-width: 0;
		}

		.object-viewer-prop-key-text {
			flex: 1;
			min-width: 0;
			word-break: break-word;
		}

		.object-viewer-prop-copy-btn {
			min-width: 22px;
			width: 22px;
			height: 22px;
			opacity: 0;
			pointer-events: none;
			user-select: none;
		}

		.object-viewer-props-table tr:hover .object-viewer-prop-copy-btn,
		.object-viewer-props-table tr:focus-within .object-viewer-prop-copy-btn {
			opacity: 1;
			pointer-events: auto;
		}

		.object-viewer-raw-actions {
			display: inline-flex;
			gap: 4px;
			align-items: center;
		}

		.object-viewer-props-table td:first-child {
			width: 35%;
			max-width: 360px;
			font-family: var(--vscode-editor-font-family);
			color: var(--vscode-descriptionForeground);
		}

		.object-viewer-props-table td:last-child {
			font-family: var(--vscode-editor-font-family);
			vertical-align: middle;
		}

		.object-viewer-props-table tr.search-match td {
			background: var(--vscode-editor-findMatchHighlightBackground);
			outline: 1px solid var(--vscode-editor-findMatchHighlightBorder);
			outline-offset: -1px;
		}

		.object-viewer-raw-body {
			padding: 10px 12px;
		}

		.object-viewer-json {
			font-family: var(--vscode-editor-font-family);
			font-size: var(--vscode-editor-font-size);
			white-space: pre;
			line-height: 1.6;
		}

		.object-viewer-json-wrap {
			white-space: pre-wrap;
			word-break: break-word;
			overflow-x: hidden;
		}

		.json-key {
			color: var(--vscode-symbolIcon-propertyForeground, #9cdcfe);
		}

		.json-string {
			color: var(--vscode-symbolIcon-stringForeground, #ce9178);
		}

		.json-number {
			color: var(--vscode-symbolIcon-numberForeground, #b5cea8);
		}

		.json-boolean {
			color: var(--vscode-symbolIcon-booleanForeground, #569cd6);
		}

		.json-null {
			color: var(--vscode-symbolIcon-nullForeground, #569cd6);
		}

		.json-highlight {
			background: var(--vscode-editor-findMatchHighlightBackground);
			border-radius: 2px;
		}

		tr.selected-row {
			background: var(--vscode-list-inactiveSelectionBackground);
		}

		tr.selected-row td {
			background: var(--vscode-list-inactiveSelectionBackground);
		}

		tr.selected-row .row-selector {
			background: var(--vscode-list-activeSelectionBackground);
			color: var(--vscode-list-activeSelectionForeground);
		}

		.add-query {
			width: 100%;
			margin-top: 16px;
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
		}

		.add-query:hover {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.cache-controls {
			display: flex;
			gap: 8px;
			align-items: center;
			margin-top: 8px;
			margin-bottom: 8px;
			font-size: 12px;
		}

		.query-actions {
			display: flex;
			align-items: center;
			gap: 12px;
			margin-top: 8px;
			margin-bottom: 10px;
			width: 100%;
		}

		.query-run {
			display: inline-flex;
			align-items: center;
			gap: 8px;
		}

		.optimize-query-btn {
			background: transparent;
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid transparent;
			border-radius: 4px;
			padding: 6px 10px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			min-width: 32px;
			height: 28px;
		}

		.optimize-query-btn:hover:not(:disabled) {
			background: var(--vscode-button-secondaryBackground);
			border-color: var(--vscode-input-border);
		}

		.optimize-query-btn:active:not(:disabled) {
			background: var(--vscode-button-secondaryHoverBackground);
			border-color: var(--vscode-input-border);
			opacity: 1;
		}

		.optimize-query-btn:focus-visible:not(:disabled) {
			background: var(--vscode-button-secondaryBackground);
			border-color: var(--vscode-focusBorder);
			outline: none;
		}

		.optimize-query-btn:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		.optimize-query-btn svg {
			width: 16px;
			height: 16px;
		}

		.optimize-query-btn img.copilot-logo {
			width: 16px;
			height: 16px;
			display: block;
		}

		.optimize-inline {
			display: inline-flex;
			align-items: center;
			gap: 8px;
		}

		.optimize-status {
			font-size: 12px;
			color: var(--vscode-descriptionForeground);
			white-space: nowrap;
			max-width: 360px;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.optimize-cancel-btn {
			background: transparent;
			color: var(--vscode-foreground);
			border: 1px solid transparent;
			border-radius: 4px;
			padding: 4px 6px;
			margin-top: 5px;
			height: 28px;
			cursor: pointer;
		}

		.optimize-cancel-btn:hover:not(:disabled),
		.optimize-cancel-btn:focus-visible:not(:disabled) {
			background: var(--vscode-inputValidation-errorBackground);
			color: var(--vscode-inputValidation-errorForeground);
			border-color: var(--vscode-inputValidation-errorBorder);
		}

		.optimize-cancel-btn:disabled {
			opacity: 0.6;
			cursor: not-allowed;
		}

		body.vscode-dark .optimize-query-btn img.copilot-logo,
		body.vscode-high-contrast .optimize-query-btn img.copilot-logo,
		body.vscode-high-contrast-light .optimize-query-btn img.copilot-logo {
			filter: invert(1);
		}

		.accept-optimizations-btn {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 4px;
			padding: 6px 10px;
			cursor: pointer;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			height: 28px;
			white-space: nowrap;
		}

		.accept-optimizations-btn:hover:not(:disabled) {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.accept-optimizations-btn:active:not(:disabled) {
			background: var(--vscode-button-secondaryHoverBackground);
			opacity: 0.8;
		}

		.accept-optimizations-btn:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		.optimize-config {
			width: 100%;
			margin-top: 8px;
		}

		.optimize-config-inner {
			border: 1px solid var(--vscode-input-border);
			border-radius: 4px;
			padding: 10px;
			background: var(--vscode-editorWidget-background);
			color: var(--vscode-foreground);
		}

		.optimize-config-loading {
			font-size: 12px;
			margin-bottom: 10px;
		}

		.optimize-config-row {
			display: flex;
			flex-direction: column;
			gap: 6px;
			margin-bottom: 10px;
		}

		.optimize-config-label {
			font-size: 12px;
			color: var(--vscode-foreground);
		}

		.optimize-config-select {
			width: 100%;
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 3px;
			padding: 6px 8px;
		}

		.optimize-config-textarea {
			width: 100%;
			min-height: 160px;
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 3px;
			padding: 8px;
			resize: vertical;
			font-family: var(--vscode-editor-font-family);
			font-size: 12px;
			line-height: 1.4;
		}

		.optimize-config-actions {
			display: flex;
			gap: 8px;
			justify-content: flex-end;
		}

		.optimize-config-run-btn,
		.optimize-config-cancel-btn {
			background: var(--vscode-button-secondaryBackground);
			color: var(--vscode-button-secondaryForeground);
			border: 1px solid var(--vscode-input-border);
			border-radius: 4px;
			padding: 6px 10px;
			cursor: pointer;
			height: 28px;
		}

		.optimize-config-run-btn:hover:not(:disabled),
		.optimize-config-cancel-btn:hover:not(:disabled) {
			background: var(--vscode-button-secondaryHoverBackground);
		}

		.optimize-config-run-btn:disabled,
		.optimize-config-cancel-btn:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		.comparison-summary-banner {
			background: color-mix(in srgb, var(--vscode-list-activeSelectionBackground) 12%, transparent);
			border-left: 3px solid var(--vscode-list-activeSelectionBackground);
			padding: 10px 12px;
			margin: 8px 0 0;
			border-radius: 3px;
			font-size: 12px;
			line-height: 1.5;
		}

		.comparison-summary-content {
			display: flex;
			flex-direction: column;
			gap: 6px;
		}

		.comparison-summary-content strong {
			display: block;
			font-size: 13px;
			margin-bottom: 4px;
			color: var(--vscode-foreground);
		}

		.comparison-metrics {
			display: flex;
			flex-direction: column;
			gap: 4px;
		}

		.comparison-metric {
			font-size: 12px;
			padding-left: 4px;
			color: var(--vscode-descriptionForeground);
		}

		.comparison-data-match {
			color: var(--vscode-testing-iconPassed);
		}

		.comparison-data-diff {
			color: var(--vscode-testing-iconFailed);
		}

		.comparison-data-diff-icon {
			color: var(--vscode-testing-iconFailed);
		}

		.comparison-warning-icon {
			display: inline-block;
			margin-left: 6px;
			color: var(--vscode-notificationsWarningIcon-foreground);
			cursor: help;
		}


		.query-exec-status {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			font-size: 12px;
			color: var(--vscode-descriptionForeground);
			white-space: nowrap;
		}

		.query-spinner {
			display: inline-block;
			width: 14px;
			height: 14px;
			box-sizing: border-box;
			border-radius: 50%;
			border: 2px solid var(--vscode-editorWidget-border);
			border-top-color: var(--vscode-progressBar-background);
			animation: query-spinner-spin 0.9s linear infinite;
		}

		.schema-status {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			font-size: 12px;
			color: var(--vscode-descriptionForeground);
			white-space: nowrap;
		}

		.schema-loaded {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			font-size: 12px;
			color: var(--vscode-descriptionForeground);
			white-space: nowrap;
		}

		.schema-cached-link {
			color: inherit;
			text-decoration: underline;
			cursor: pointer;
		}

		.schema-cached-link:hover,
		.schema-cached-link:focus {
			color: inherit;
		}

		.schema-loaded.error {
			text-decoration: underline;
		}

		.schema-spinner {
			display: inline-block;
			width: 12px;
			height: 12px;
			box-sizing: border-box;
			border-radius: 50%;
			border: 2px solid var(--vscode-editorWidget-border);
			border-top-color: var(--vscode-progressBar-background);
			animation: query-spinner-spin 0.9s linear infinite;
		}

		@keyframes query-spinner-spin {
			from { transform: rotate(0deg); }
			to { transform: rotate(360deg); }
		}

		.query-actions .cache-controls {
			margin: 0;
			margin-left: auto;
			justify-content: flex-end;
			flex-wrap: wrap;
			align-items: center;
		}

		.cache-checkbox {
			display: flex;
			align-items: center;
			gap: 4px;
			cursor: pointer;
		}

		.cache-checkbox input[type="checkbox"] {
			cursor: pointer;
		}

		.cache-controls select,
		.cache-controls input[type="number"] {
			background: var(--vscode-input-background);
			color: var(--vscode-input-foreground);
			border: 1px solid var(--vscode-input-border);
			padding: 4px 8px;
			font-size: 12px;
			border-radius: 2px;
			width: 70px;
		}

		.cache-controls select:disabled,
		.cache-controls input[type="number"]:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}

		.cache-info {
			color: var(--vscode-descriptionForeground);
			font-size: 11px;
		}
	